"use strict";var Hl=Object.create;var Mt=Object.defineProperty;var Gl=Object.getOwnPropertyDescriptor;var Ul=Object.getOwnPropertyNames;var Wl=Object.getPrototypeOf,zl=Object.prototype.hasOwnProperty;var j=(e,t)=>()=>(e&&(t=e(e=0)),t);var m=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ie=(e,t)=>{for(var r in t)Mt(e,r,{get:t[r],enumerable:!0})},po=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ul(t))!zl.call(e,i)&&i!==r&&Mt(e,i,{get:()=>t[i],enumerable:!(n=Gl(t,i))||n.enumerable});return e};var Te=(e,t,r)=>(r=e!=null?Hl(Wl(e)):{},po(t||!e||!e.__esModule?Mt(r,"default",{value:e,enumerable:!0}):r,e)),Ae=e=>po(Mt({},"__esModule",{value:!0}),e);var rn=m(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});tn.default=Kl;var Vl=Jl(require("crypto"));function Jl(e){return e&&e.__esModule?e:{default:e}}var Bt=new Uint8Array(256),$t=Bt.length;function Kl(){return $t>Bt.length-16&&(Vl.default.randomFillSync(Bt),$t=0),Bt.slice($t,$t+=16)}});var mo=m(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.default=void 0;var Yl=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Ht.default=Yl});var ut=m(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0});Gt.default=void 0;var Ql=Xl(mo());function Xl(e){return e&&e.__esModule?e:{default:e}}function Zl(e){return typeof e=="string"&&Ql.default.test(e)}var ed=Zl;Gt.default=ed});var ct=m(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.default=void 0;var td=rd(ut());function rd(e){return e&&e.__esModule?e:{default:e}}var G=[];for(let e=0;e<256;++e)G.push((e+256).toString(16).substr(1));function nd(e,t=0){let r=(G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]).toLowerCase();if(!(0,td.default)(r))throw TypeError("Stringified UUID is invalid");return r}var id=nd;Ut.default=id});var vo=m(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.default=void 0;var od=go(rn()),sd=go(ct());function go(e){return e&&e.__esModule?e:{default:e}}var ho,nn,on=0,sn=0;function ad(e,t,r){let n=t&&r||0,i=t||new Array(16);e=e||{};let o=e.node||ho,a=e.clockseq!==void 0?e.clockseq:nn;if(o==null||a==null){let d=e.random||(e.rng||od.default)();o==null&&(o=ho=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=nn=(d[6]<<8|d[7])&16383)}let s=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:sn+1,c=s-on+(u-sn)/1e4;if(c<0&&e.clockseq===void 0&&(a=a+1&16383),(c<0||s>on)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");on=s,sn=u,nn=a,s+=122192928e5;let f=((s&268435455)*1e4+u)%4294967296;i[n++]=f>>>24&255,i[n++]=f>>>16&255,i[n++]=f>>>8&255,i[n++]=f&255;let l=s/4294967296*1e4&268435455;i[n++]=l>>>8&255,i[n++]=l&255,i[n++]=l>>>24&15|16,i[n++]=l>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=o[d];return t||(0,sd.default)(i)}var ud=ad;Wt.default=ud});var an=m(zt=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});zt.default=void 0;var cd=fd(ut());function fd(e){return e&&e.__esModule?e:{default:e}}function ld(e){if(!(0,cd.default)(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var dd=ld;zt.default=dd});var un=m(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.default=hd;qe.URL=qe.DNS=void 0;var yd=So(ct()),pd=So(an());function So(e){return e&&e.__esModule?e:{default:e}}function md(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var wo="6ba7b810-9dad-11d1-80b4-00c04fd430c8";qe.DNS=wo;var bo="6ba7b811-9dad-11d1-80b4-00c04fd430c8";qe.URL=bo;function hd(e,t,r){function n(i,o,a,s){if(typeof i=="string"&&(i=md(i)),typeof o=="string"&&(o=(0,pd.default)(o)),o.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(o),u.set(i,o.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,a){s=s||0;for(let c=0;c<16;++c)a[s+c]=u[c];return a}return(0,yd.default)(u)}try{n.name=e}catch{}return n.DNS=wo,n.URL=bo,n}});var Eo=m(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.default=void 0;var gd=vd(require("crypto"));function vd(e){return e&&e.__esModule?e:{default:e}}function Sd(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),gd.default.createHash("md5").update(e).digest()}var wd=Sd;Vt.default=wd});var _o=m(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.default=void 0;var bd=Oo(un()),Ed=Oo(Eo());function Oo(e){return e&&e.__esModule?e:{default:e}}var Od=(0,bd.default)("v3",48,Ed.default),_d=Od;Jt.default=_d});var Po=m(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});Kt.default=void 0;var xd=xo(rn()),Pd=xo(ct());function xo(e){return e&&e.__esModule?e:{default:e}}function Rd(e,t,r){e=e||{};let n=e.random||(e.rng||xd.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,Pd.default)(n)}var Id=Rd;Kt.default=Id});var Ro=m(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.default=void 0;var Td=Ad(require("crypto"));function Ad(e){return e&&e.__esModule?e:{default:e}}function qd(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Td.default.createHash("sha1").update(e).digest()}var Ld=qd;Yt.default=Ld});var To=m(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.default=void 0;var Nd=Io(un()),Dd=Io(Ro());function Io(e){return e&&e.__esModule?e:{default:e}}var Cd=(0,Nd.default)("v5",80,Dd.default),Fd=Cd;Qt.default=Fd});var Ao=m(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});Xt.default=void 0;var kd="00000000-0000-0000-0000-000000000000";Xt.default=kd});var qo=m(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});Zt.default=void 0;var jd=Md(ut());function Md(e){return e&&e.__esModule?e:{default:e}}function $d(e){if(!(0,jd.default)(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Bd=$d;Zt.default=Bd});var Lo=m(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});Object.defineProperty(oe,"v1",{enumerable:!0,get:function(){return Hd.default}});Object.defineProperty(oe,"v3",{enumerable:!0,get:function(){return Gd.default}});Object.defineProperty(oe,"v4",{enumerable:!0,get:function(){return Ud.default}});Object.defineProperty(oe,"v5",{enumerable:!0,get:function(){return Wd.default}});Object.defineProperty(oe,"NIL",{enumerable:!0,get:function(){return zd.default}});Object.defineProperty(oe,"version",{enumerable:!0,get:function(){return Vd.default}});Object.defineProperty(oe,"validate",{enumerable:!0,get:function(){return Jd.default}});Object.defineProperty(oe,"stringify",{enumerable:!0,get:function(){return Kd.default}});Object.defineProperty(oe,"parse",{enumerable:!0,get:function(){return Yd.default}});var Hd=ve(vo()),Gd=ve(_o()),Ud=ve(Po()),Wd=ve(To()),zd=ve(Ao()),Vd=ve(qo()),Jd=ve(ut()),Kd=ve(ct()),Yd=ve(an());function ve(e){return e&&e.__esModule?e:{default:e}}});var ce,tb,rb,er,nb,ib,ob,sb,ab,ub,cn=j(()=>{ce=Te(Lo(),1),tb=ce.default.v1,rb=ce.default.v3,er=ce.default.v4,nb=ce.default.v5,ib=ce.default.NIL,ob=ce.default.version,sb=ce.default.validate,ab=ce.default.stringify,ub=ce.default.parse});var No={};Ie(No,{LambdaInvocation:()=>ft,default:()=>tr});var tr,ft,fn=j(()=>{"use strict";cn();tr=class{constructor(){this._id=er().toString();this._spawnedAt=Date.now();this._invocationCounter=0;this._lifetimeDuration=0}get id(){return this._id}get age(){return Date.now()-this._spawnedAt}get invocationCounter(){return this._invocationCounter}get lifetimeDuration(){return this._lifetimeDuration}startInvocation(){++this._invocationCounter}stopInvocation(t){this._lifetimeDuration+=t}},ft=class{constructor(t){this._startTime=Date.now();this._isRunning=!1;this._lambda=t,this._stopTime=this._startTime}get lambda(){return this._lambda}get duration(){return this._stopTime-this._startTime}start(){this._isRunning||(this._isRunning=!0,this._lambda.startInvocation())}stop(){this._isRunning&&(this._isRunning=!1,this._stopTime=Date.now(),this._lambda.stopInvocation(this.duration))}}});var ko=m((cb,Fo)=>{"use strict";Fo.exports=Co;var{toString:Xd}=Object.prototype,ln=Symbol("circular-ref-tag"),dn=Symbol("pino-raw-err-ref"),Do=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[dn]},set:function(e){this[dn]=e}}});Object.defineProperty(Do,dn,{writable:!0,value:{}});function Co(e){if(!(e instanceof Error))return e;e[ln]=void 0;let t=Object.create(Do);t.type=Xd.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack;for(let r in e)if(t[r]===void 0){let n=e[r];n instanceof Error?n.hasOwnProperty(ln)||(t[r]=Co(n)):t[r]=n}return delete e[ln],t.raw=e,t}});var Bo=m((fb,$o)=>{"use strict";$o.exports={mapHttpRequest:Zd,reqSerializer:Mo};var yn=Symbol("pino-raw-req-ref"),jo=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[yn]},set:function(e){this[yn]=e}}});Object.defineProperty(jo,yn,{writable:!0,value:{}});function Mo(e){let t=e.info||e.socket,r=Object.create(jo);return r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl?(r.url=e.originalUrl,r.query=e.query,r.params=e.params):r.url=e.path||(e.url?e.url.path||e.url:void 0),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function Zd(e){return{req:Mo(e)}}});var Wo=m((lb,Uo)=>{"use strict";Uo.exports={mapHttpResponse:ey,resSerializer:Go};var pn=Symbol("pino-raw-res-ref"),Ho=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[pn]},set:function(e){this[pn]=e}}});Object.defineProperty(Ho,pn,{writable:!0,value:{}});function Go(e){let t=Object.create(Ho);return t.statusCode=e.statusCode,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function ey(e){return{res:Go(e)}}});var hn=m((db,zo)=>{"use strict";var mn=ko(),rr=Bo(),nr=Wo();zo.exports={err:mn,mapHttpRequest:rr.mapHttpRequest,mapHttpResponse:nr.mapHttpResponse,req:rr.reqSerializer,res:nr.resSerializer,wrapErrorSerializer:function(t){return t===mn?t:function(n){return t(mn(n))}},wrapRequestSerializer:function(t){return t===rr.reqSerializer?t:function(n){return t(rr.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===nr.resSerializer?t:function(n){return t(nr.resSerializer(n))}}}});var Jo=m((yb,Vo)=>{"use strict";var{createContext:ty,runInContext:ry}=require("vm");Vo.exports=ny;function ny(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:i}){i.forEach(o=>{if(typeof o!="string")throw Error(t());try{if(/ã€‡/.test(o))throw Error();let a=new Proxy({},{get:()=>a,set:()=>{throw Error()}}),s=(o[0]==="["?"":".")+o.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(s)||/\/\*/.test(s))throw Error();ry(`
          (function () {
            'use strict'
            o${s}
            if ([o${s}].length !== 1) throw Error()
          })()
        `,ty({o:a,"\u3007":null}),{codeGeneration:{strings:!1,wasm:!1}})}catch{throw Error(r(o))}})}}});var ir=m((pb,Ko)=>{"use strict";Ko.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Qo=m((mb,Yo)=>{"use strict";var iy=ir();Yo.exports=oy;function oy({paths:e}){let t=[];var r=0;let n=e.reduce(function(i,o,a){var s=o.match(iy).map(f=>f.replace(/'|"|`/g,""));let u=o[0]==="[";s=s.map(f=>f[0]==="["?f.substr(1,f.length-2):f);let c=s.indexOf("*");if(c>-1){let f=s.slice(0,c),l=f.join("."),d=s.slice(c+1,s.length),y=d.length>0;r++,t.push({before:f,beforeStr:l,after:d,nested:y})}else i[o]={path:s,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(o),leadingBracket:u};return i},{});return{wildcards:t,wcLen:r,secret:n}}});var Zo=m((hb,Xo)=>{"use strict";var sy=ir();Xo.exports=ay;function ay({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:i,censorFctTakesPath:o},a){let s=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${ly(n,t)}
    }
    const { censor, secret } = this
    ${uy(e,i,o)}
    this.compileRestore()
    ${cy(r>0,i,o)}
    ${fy(t)}
  `).bind(a);return t===!1&&(s.restore=u=>a.restore(u)),s}function uy(e,t,r){return Object.keys(e).map(n=>{let{escPath:i,leadingBracket:o,path:a}=e[n],s=o?1:0,u=o?"":".",c=[];for(var f;(f=sy.exec(n))!==null;){let[,p]=f,{index:h,input:v}=f;h>s&&c.push(v.substring(0,h-(p?0:1)))}var l=c.map(p=>`o${u}${p}`).join(" && ");l.length===0?l+=`o${u}${n} != null`:l+=` && o${u}${n} != null`;let d=`
      switch (true) {
        ${c.reverse().map(p=>`
          case o${u}${p} === censor:
            secret[${i}].circle = ${JSON.stringify(p)}
            break
        `).join(`
`)}
      }
    `,y=r?`val, ${JSON.stringify(a)}`:"val";return`
      if (${l}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${i}].precensored = true
        } else {
          secret[${i}].val = val
          o${u}${n} = ${t?`censor(${y})`:"censor"}
          ${d}
        }
      }
    `}).join(`
`)}function cy(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function fy(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function ly(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var gn=m((gb,ts)=>{"use strict";ts.exports={groupRedact:yy,groupRestore:dy,nestedRedact:my,nestedRestore:py};function dy({keys:e,values:t,target:r}){if(r==null)return;let n=e.length;for(var i=0;i<n;i++){let o=e[i];r[o]=t[i]}}function yy(e,t,r,n,i){let o=es(e,t);if(o==null)return{keys:null,values:null,target:null,flat:!0};let a=Object.keys(o),s=a.length,u=t.length,c=i?[...t]:void 0,f=new Array(s);for(var l=0;l<s;l++){let d=a[l];f[l]=o[d],i?(c[u]=d,o[d]=r(o[d],c)):n?o[d]=r(o[d]):o[d]=r}return{keys:a,values:f,target:o,flat:!0}}function py(e){let t=e.length;for(var r=0;r<t;r++){let{key:i,target:o,value:a}=e[r];if(or(o,i)&&(o[i]=a),typeof o=="object"){let s=Object.keys(o);for(var n=0;n<s.length;n++){let u=s[n],c=o[u];or(c,i)&&(c[i]=a)}}}}function my(e,t,r,n,i,o,a){let s=es(t,r);if(s==null)return;let u=Object.keys(s),c=u.length;for(var f=0;f<c;f++){let l=u[f],{value:d,parent:y,exists:p}=hy(s,l,r,n,i,o,a);p===!0&&y!==null&&e.push({key:n[n.length-1],target:y,value:d})}return e}function or(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function hy(e,t,r,n,i,o,a){let s=n.length,u=s-1,c=t;var f=-1,l,d,y,p=null,h=!0,v=null;if(y=l=e[t],typeof l!="object")return{value:null,parent:null,exists:h};for(;l!=null&&++f<s;){if(t=n[f],p=y,t!=="*"&&!v&&!(typeof l=="object"&&t in l)){h=!1;break}if(!(t==="*"&&(v=t,f!==u))){if(v){let R=Object.keys(l);for(var g=0;g<R.length;g++){let E=R[g],I=l[E],F=t==="*";(F||typeof I=="object"&&I!==null&&t in I)&&(F?y=I:y=I[t],d=f!==u?y:o?a?i(y,[...r,c,...n]):i(y):i,F?l[E]=d:I[t]===d?h=!1:I[t]=d===void 0&&i!==void 0||or(I,t)&&d===y?I[t]:d)}v=null}else y=l[t],d=f!==u?y:o?a?i(y,[...r,c,...n]):i(y):i,l[t]=or(l,t)&&d===y||d===void 0&&i!==void 0?l[t]:d,l=l[t];if(typeof l!="object")break;y===p&&(h=!1)}}return{value:y,parent:p,exists:h}}function es(e,t){for(var r=-1,n=t.length,i=e;i!=null&&++r<n;)i=i[t[r]];return i}});var ns=m((vb,rs)=>{"use strict";var{groupRestore:gy,nestedRestore:vy}=gn();rs.exports=Sy;function Sy({secret:e,wcLen:t}){return function(){if(this.restore)return;let n=Object.keys(e),i=wy(e,n),o=t>0,a=o?{secret:e,groupRestore:gy,nestedRestore:vy}:{secret:e};this.restore=Function("o",by(i,n,o)).bind(a)}}function wy(e,t){return t.map(r=>{let{circle:n,escPath:i,leadingBracket:o}=e[r],s=n?`o.${n} = secret[${i}].val`:`o${o?"":"."}${r} = secret[${i}].val`,u=`secret[${i}].val = undefined`;return`
      if (secret[${i}].val !== undefined) {
        try { ${s} } catch (e) {}
        ${u}
      }
    `}).join("")}function by(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o.flat === true) this.groupRestore(o)
      else this.nestedRestore(o)
      secret[k] = null
    }
  `:""}
    ${e}
    return o
  `}});var os=m((Sb,is)=>{"use strict";is.exports=Ey;function Ey(e){let{secret:t,censor:r,compileRestore:n,serialize:i,groupRedact:o,nestedRedact:a,wildcards:s,wcLen:u}=e,c=[{secret:t,censor:r,compileRestore:n}];return i!==!1&&c.push({serialize:i}),u>0&&c.push({groupRedact:o,nestedRedact:a,wildcards:s,wcLen:u}),Object.assign(...c)}});var us=m((wb,as)=>{"use strict";var ss=Jo(),Oy=Qo(),_y=Zo(),xy=ns(),{groupRedact:Py,nestedRedact:Ry}=gn(),Iy=os(),Ty=ir(),Ay=ss(),vn=e=>e;vn.restore=vn;var qy="[REDACTED]";Sn.rx=Ty;Sn.validator=ss;as.exports=Sn;function Sn(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let i=n===!0?void 0:"censor"in e?e.censor:qy,o=typeof i=="function",a=o&&i.length>1;if(t.length===0)return r||vn;Ay({paths:t,serialize:r,censor:i});let{wildcards:s,wcLen:u,secret:c}=Oy({paths:t,censor:i}),f=xy({secret:c,wcLen:u}),l="strict"in e?e.strict:!0;return _y({secret:c,wcLen:u,serialize:r,strict:l,isCensorFct:o,censorFctTakesPath:a},Iy({secret:c,censor:i,compileRestore:f,serialize:r,groupRedact:Py,nestedRedact:Ry,wildcards:s,wcLen:u}))}});var Le=m((bb,cs)=>{"use strict";var Ly=Symbol("pino.setLevel"),Ny=Symbol("pino.getLevel"),Dy=Symbol("pino.levelVal"),Cy=Symbol("pino.useLevelLabels"),Fy=Symbol("pino.useOnlyCustomLevels"),ky=Symbol("pino.mixin"),jy=Symbol("pino.lsCache"),My=Symbol("pino.chindings"),$y=Symbol("pino.parsedChindings"),By=Symbol("pino.asJson"),Hy=Symbol("pino.write"),Gy=Symbol("pino.redactFmt"),Uy=Symbol("pino.time"),Wy=Symbol("pino.timeSliceIndex"),zy=Symbol("pino.stream"),Vy=Symbol("pino.stringify"),Jy=Symbol("pino.stringifiers"),Ky=Symbol("pino.end"),Yy=Symbol("pino.formatOpts"),Qy=Symbol("pino.messageKey"),Xy=Symbol("pino.nestedKey"),Zy=Symbol("pino.mixinMergeStrategy"),ep=Symbol("pino.wildcardFirst"),tp=Symbol.for("pino.serializers"),rp=Symbol.for("pino.formatters"),np=Symbol.for("pino.hooks"),ip=Symbol.for("pino.metadata");cs.exports={setLevelSym:Ly,getLevelSym:Ny,levelValSym:Dy,useLevelLabelsSym:Cy,mixinSym:ky,lsCacheSym:jy,chindingsSym:My,parsedChindingsSym:$y,asJsonSym:By,writeSym:Hy,serializersSym:tp,redactFmtSym:Gy,timeSym:Uy,timeSliceIndexSym:Wy,streamSym:zy,stringifySym:Vy,stringifiersSym:Jy,endSym:Ky,formatOptsSym:Yy,messageKeySym:Qy,nestedKeySym:Xy,wildcardFirstSym:ep,needsMetadataGsym:ip,useOnlyCustomLevelsSym:Fy,formattersSym:rp,hooksSym:np,mixinMergeStrategySym:Zy}});var En=m((Eb,ys)=>{"use strict";var bn=us(),{redactFmtSym:op,wildcardFirstSym:sr}=Le(),{rx:wn,validator:sp}=bn,fs=sp({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),ls="[Redacted]",ds=!1;function ap(e,t){let{paths:r,censor:n}=up(e),i=r.reduce((s,u)=>{wn.lastIndex=0;let c=wn.exec(u),f=wn.exec(u),l=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(l==="*"&&(l=sr),f===null)return s[l]=null,s;if(s[l]===null)return s;let{index:d}=f,y=`${u.substr(d,u.length-1)}`;return s[l]=s[l]||[],l!==sr&&s[l].length===0&&s[l].push(...s[sr]||[]),l===sr&&Object.keys(s).forEach(function(p){s[p]&&s[p].push(y)}),s[l].push(y),s},{}),o={[op]:bn({paths:r,censor:n,serialize:t,strict:ds})},a=(...s)=>t(typeof n=="function"?n(...s):n);return[...Object.keys(i),...Object.getOwnPropertySymbols(i)].reduce((s,u)=>{if(i[u]===null)s[u]=c=>a(c,[u]);else{let c=typeof n=="function"?(f,l)=>n(f,[u,...l]):n;s[u]=bn({paths:i[u],censor:c,serialize:t,strict:ds})}return s},o)}function up(e){if(Array.isArray(e))return e={paths:e,censor:ls},fs(e),e;let{paths:t,censor:r=ls,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),fs({paths:t,censor:r}),{paths:t,censor:r}}ys.exports=ap});var ms=m((Ob,ps)=>{"use strict";var cp=()=>"",fp=()=>`,"time":${Date.now()}`,lp=()=>`,"time":${Math.round(Date.now()/1e3)}`,dp=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;ps.exports={nullTime:cp,epochTime:fp,unixTime:lp,isoTime:dp}});var ar=m((_b,hs)=>{"use strict";function yp(e){return e|0,e}hs.exports=yp});var gs=m((xb,On)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));On.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};On.exports=e}});var Pn=m((Pb,ws)=>{"use strict";var fe=require("fs"),pp=require("events"),mp=ar(),hp=require("util").inherits,xn=100,vs=gs(),_n=16*1024*1024;function Ss(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(n,i){if(n){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",n)}):t.emit("error",n);return}if(t.fd=i,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),t._reopening)return;let o=t._buf.length;o>0&&o>t.minLength&&!t.destroyed&&Ge(t)}if(t.sync)try{let n=fe.openSync(e,"a");r(null,n)}catch(n){throw r(n),n}else fe.open(e,"a",r)}function le(e){if(!(this instanceof le))return new le(e);let{fd:t,dest:r,minLength:n,sync:i}=e||{};if(t=t||r,this._buf="",this.fd=-1,this._writing=!1,this._writingBuf="",this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this.file=null,this.destroyed=!1,this.sync=i||!1,this.minLength=n||0,typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")Ss(t,this);else throw new Error("SonicBoom supports only file descriptors and files");this.release=(o,a)=>{if(o){if(o.code==="EAGAIN")if(this.sync)try{vs(xn),this.release(void 0,0)}catch(u){this.release(u)}else setTimeout(()=>{fe.write(this.fd,this._writingBuf,"utf8",this.release)},xn);else this._buf=this._writingBuf+this._buf,this._writingBuf="",this._writing=!1,this.emit("error",o);return}if(this._writingBuf.length!==a)if(this._writingBuf=this._writingBuf.slice(a),this.sync)try{do a=fe.writeSync(this.fd,this._writingBuf,"utf8"),this._writingBuf=this._writingBuf.slice(a);while(this._writingBuf.length!==0)}catch(u){this.release(u);return}else{fe.write(this.fd,this._writingBuf,"utf8",this.release);return}if(this._writingBuf="",this.destroyed)return;let s=this._buf.length;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):s>0&&s>this.minLength?Ge(this):this._ending?s>0?Ge(this):(this._writing=!1,ur(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(gp,this)):this.emit("drain"))},this.on("newListener",function(o){o==="drain"&&(this._asyncDrainScheduled=!1)})}function gp(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}hp(le,pp);le.prototype.write=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");this._buf+=e;let t=this._buf.length;return!this._writing&&t>this.minLength&&Ge(this),t<16384};le.prototype.flush=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");this._writing||this.minLength<=0||Ge(this)};le.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&fe.close(t,r=>{if(r)return this.emit("error",r)})}),Ss(e||this.file,this)};le.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}if(!this._ending){if(this._ending=!0,!this._writing&&this._buf.length>0&&this.fd>=0){Ge(this);return}this._writing||ur(this)}};le.prototype.flushSync=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");for(;this._buf.length>0;)try{fe.writeSync(this.fd,this._buf,"utf8"),this._buf=""}catch(e){if(e.code!=="EAGAIN")throw e;vs(xn)}};le.prototype.destroy=function(){this.destroyed||ur(this)};function Ge(e){e._writing=!0;let t=e._buf,r=e.release;if(t.length>_n?(t=t.slice(0,_n),e._buf=e._buf.slice(_n)):e._buf="",mp(t),e._writingBuf=t,e.sync)try{let n=fe.writeSync(e.fd,t,"utf8");r(null,n)}catch(n){r(n)}else fe.write(e.fd,t,"utf8",r)}function ur(e){if(e.fd===-1){e.once("ready",ur.bind(null,e));return}fe.close(e.fd,t=>{if(t){e.emit("error",t);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}),e.destroyed=!0,e._buf=""}ws.exports=le});var Es=m((Rb,bs)=>{"use strict";var{format:Rn}=require("util");function vp(){let e={},t=new Map;function r(i,o,a){if(!i)throw new Error("Warning name must not be empty");if(!o)throw new Error("Warning code must not be empty");if(!a)throw new Error("Warning message must not be empty");if(o=o.toUpperCase(),e[o]!==void 0)throw new Error(`The code '${o}' already exist`);function s(u,c,f){let l;return u&&c&&f?l=Rn(a,u,c,f):u&&c?l=Rn(a,u,c):u?l=Rn(a,u):l=a,{code:o,name:i,message:l}}return t.set(o,!1),e[o]=s,e[o]}function n(i,o,a,s){if(e[i]===void 0)throw new Error(`The code '${i}' does not exist`);if(t.get(i)===!0)return;t.set(i,!0);let u=e[i](o,a,s);process.emitWarning(u.message,u.name,u.code)}return{create:r,emit:n,emitted:t}}bs.exports=vp});var _s=m((Ib,Os)=>{"use strict";var lt=Es()();Os.exports=lt;var cr="PinoWarning";lt.create(cr,"PINODEP004","bindings.serializers is deprecated, use options.serializers option instead");lt.create(cr,"PINODEP005","bindings.formatters is deprecated, use options.formatters option instead");lt.create(cr,"PINODEP006","bindings.customLevels is deprecated, use options.customLevels option instead");lt.create(cr,"PINODEP007","bindings.level is deprecated, use options.level option instead")});var Ps=m((Tb,xs)=>{"use strict";function Sp(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}xs.exports=wp;function wp(e,t,r){var n=r&&r.stringify||Sp,i=1;if(typeof e=="object"&&e!==null){var o=t.length+i;if(o===1)return e;var a=new Array(o);a[0]=n(e);for(var s=1;s<o;s++)a[s]=n(t[s]);return a.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",f=1-i,l=-1,d=e&&e.length||0,y=0;y<d;){if(e.charCodeAt(y)===37&&y+1<d){switch(l=l>-1?l:0,e.charCodeAt(y+1)){case 100:case 102:if(f>=u||t[f]==null)break;l<y&&(c+=e.slice(l,y)),c+=Number(t[f]),l=y+2,y++;break;case 105:if(f>=u||t[f]==null)break;l<y&&(c+=e.slice(l,y)),c+=Math.floor(Number(t[f])),l=y+2,y++;break;case 79:case 111:case 106:if(f>=u||t[f]===void 0)break;l<y&&(c+=e.slice(l,y));var p=typeof t[f];if(p==="string"){c+="'"+t[f]+"'",l=y+2,y++;break}if(p==="function"){c+=t[f].name||"<anonymous>",l=y+2,y++;break}c+=n(t[f]),l=y+2,y++;break;case 115:if(f>=u)break;l<y&&(c+=e.slice(l,y)),c+=String(t[f]),l=y+2,y++;break;case 37:l<y&&(c+=e.slice(l,y)),c+="%",l=y+2,y++,f--;break}++f}++y}return l===-1?e:(l<d&&(c+=e.slice(l)),c)}});var Ls=m((Ab,qs)=>{qs.exports=dt;dt.default=dt;dt.stable=Ts;dt.stableStringify=Ts;var fr="[...]",Rs="[Circular]",De=[],Ne=[];function Is(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function dt(e,t,r,n){typeof n>"u"&&(n=Is()),In(e,"",0,[],void 0,0,n);var i;try{Ne.length===0?i=JSON.stringify(e,t,r):i=JSON.stringify(e,As(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;De.length!==0;){var o=De.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function Ue(e,t,r,n){var i=Object.getOwnPropertyDescriptor(n,r);i.get!==void 0?i.configurable?(Object.defineProperty(n,r,{value:e}),De.push([n,r,t,i])):Ne.push([t,r,e]):(n[r]=e,De.push([n,r,t]))}function In(e,t,r,n,i,o,a){o+=1;var s;if(typeof e=="object"&&e!==null){for(s=0;s<n.length;s++)if(n[s]===e){Ue(Rs,e,t,i);return}if(typeof a.depthLimit<"u"&&o>a.depthLimit){Ue(fr,e,t,i);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Ue(fr,e,t,i);return}if(n.push(e),Array.isArray(e))for(s=0;s<e.length;s++)In(e[s],s,s,n,e,o,a);else{var u=Object.keys(e);for(s=0;s<u.length;s++){var c=u[s];In(e[c],c,s,n,e,o,a)}}n.pop()}}function bp(e,t){return e<t?-1:e>t?1:0}function Ts(e,t,r,n){typeof n>"u"&&(n=Is());var i=Tn(e,"",0,[],void 0,0,n)||e,o;try{Ne.length===0?o=JSON.stringify(i,t,r):o=JSON.stringify(i,As(t),r)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;De.length!==0;){var a=De.pop();a.length===4?Object.defineProperty(a[0],a[1],a[3]):a[0][a[1]]=a[2]}}return o}function Tn(e,t,r,n,i,o,a){o+=1;var s;if(typeof e=="object"&&e!==null){for(s=0;s<n.length;s++)if(n[s]===e){Ue(Rs,e,t,i);return}try{if(typeof e.toJSON=="function")return}catch{return}if(typeof a.depthLimit<"u"&&o>a.depthLimit){Ue(fr,e,t,i);return}if(typeof a.edgesLimit<"u"&&r+1>a.edgesLimit){Ue(fr,e,t,i);return}if(n.push(e),Array.isArray(e))for(s=0;s<e.length;s++)Tn(e[s],s,s,n,e,o,a);else{var u={},c=Object.keys(e).sort(bp);for(s=0;s<c.length;s++){var f=c[s];Tn(e[f],f,s,n,e,o,a),u[f]=e[f]}if(typeof i<"u")De.push([i,t,e]),i[t]=u;else return u}n.pop()}}function As(e){return e=typeof e<"u"?e:function(t,r){return r},function(t,r){if(Ne.length>0)for(var n=0;n<Ne.length;n++){var i=Ne[n];if(i[1]===t&&i[0]===r){r=i[2],Ne.splice(n,1);break}}return e.call(this,t,r)}}});var dr=m((qb,Us)=>{"use strict";var Ns=Ps(),{mapHttpRequest:Ep,mapHttpResponse:Op}=hn(),js=Pn(),_p=Ls(),{lsCacheSym:xp,chindingsSym:Ln,parsedChindingsSym:An,writeSym:Ds,serializersSym:Nn,formatOptsSym:Cs,endSym:Pp,stringifiersSym:Dn,stringifySym:Ms,wildcardFirstSym:$s,needsMetadataGsym:Bs,redactFmtSym:Rp,streamSym:Ip,nestedKeySym:Fs,formattersSym:Cn,messageKeySym:Hs}=Le();function yt(){}function Tp(e,t){if(!t)return r;return function(...i){t.call(this,i,r,e)};function r(n,...i){if(typeof n=="object"){let o=n;n!==null&&(n.method&&n.headers&&n.socket?n=Ep(n):typeof n.setHeader=="function"&&(n=Op(n))),this[Fs]&&(n={[this[Fs]]:n});let a;o===null&&i.length===0?a=[null]:(o=i.shift(),a=i),this[Ds](n,Ns(o,a,this[Cs]),e)}else this[Ds](null,Ns(n,i,this[Cs]),e)}}function Ap(e){let t="",r=0,n=!1,i=255,o=e.length;if(o>100)return JSON.stringify(e);for(var a=0;a<o&&i>=32;a++)i=e.charCodeAt(a),(i===34||i===92)&&(t+=e.slice(r,a)+"\\",r=a,n=!0);return n?t+=e.slice(r):t=e,i<32?JSON.stringify(e):'"'+t+'"'}function qp(e,t,r,n){let i=this[Ms],o=this[Dn],a=this[Pp],s=this[Ln],u=this[Nn],c=this[Cn],f=this[Hs],l=this[xp][r]+n;l=l+s;let d,y=e.hasOwnProperty===void 0;c.log&&(e=c.log(e)),t!==void 0&&(e[f]=t);let p=o[$s];for(let h in e)if(d=e[h],(y||e.hasOwnProperty(h))&&d!==void 0){d=u[h]?u[h](d):d;let v=o[h]||p;switch(typeof d){case"undefined":case"function":continue;case"number":Number.isFinite(d)===!1&&(d=null);case"boolean":v&&(d=v(d));break;case"string":d=(v||Ap)(d);break;default:d=(v||i)(d)}if(d===void 0)continue;l+=',"'+h+'":'+d}return l+a}function Lp(e,t){let r,n=e[Ln],i=e[Ms],o=e[Dn],a=o[$s],s=e[Nn],u=e[Cn].bindings;t=u(t);for(let c in t)if(r=t[c],(c!=="level"&&c!=="serializers"&&c!=="formatters"&&c!=="customLevels"&&t.hasOwnProperty(c)&&r!==void 0)===!0){if(r=s[c]?s[c](r):r,r=(o[c]||a||i)(r),r===void 0)continue;n+=',"'+c+'":'+r}return n}function Gs(e,t,r,n){if(t&&typeof t=="function")return t=t.bind(n),qn(t(e),r,e);try{let i=require("pino-pretty").prettyFactory||require("pino-pretty");return i.asMetaWrapper=qn,qn(i(e),r,e)}catch(i){throw i.message.startsWith("Cannot find module 'pino-pretty'")?Error("Missing `pino-pretty` module: `pino-pretty` must be installed separately"):i}}function qn(e,t,r){r=Object.assign({suppressFlushSyncWarning:!1},r);let n=!1;return{[Bs]:!0,lastLevel:0,lastMsg:null,lastObj:null,lastLogger:null,flushSync(){r.suppressFlushSyncWarning||n||(n=!0,ks(t,this),t.write(e(Object.assign({level:40,msg:"pino.final with prettyPrint does not support flushing",time:Date.now()},this.chindings()))))},chindings(){let i=this.lastLogger,o=null;return i?(i.hasOwnProperty(An)?o=i[An]:(o=JSON.parse("{"+i[Ln].substr(1)+"}"),i[An]=o),o):null},write(i){let o=this.lastLogger,a=this.chindings(),s=this.lastTime;s.match(/^\d+/)?s=parseInt(s):s=s.slice(1,-1);let u=this.lastObj,c=this.lastMsg,f=null,l=o[Cn],d=l.log?l.log(u):u,y=o[Hs];c&&d&&!d.hasOwnProperty(y)&&(d[y]=c);let p=Object.assign({level:this.lastLevel,time:s},d,f),h=o[Nn],v=Object.keys(h);for(var g=0;g<v.length;g++){let F=v[g];p[F]!==void 0&&(p[F]=h[F](p[F]))}for(let F in a)p.hasOwnProperty(F)||(p[F]=a[F]);let E=o[Dn][Rp],I=e(typeof E=="function"?E(p):p);I!==void 0&&(ks(t,this),t.write(I))}}}function Np(e){return e.write!==e.constructor.prototype.write}function lr(e){let t=new js(e);return t.on("error",r),t;function r(n){if(n.code==="EPIPE"){t.write=yt,t.end=yt,t.flushSync=yt,t.destroy=yt;return}t.removeListener("error",r),t.emit("error",n)}}function Dp(e){return function(r,n={},i){if(typeof n=="string"?(i=lr({dest:n,sync:!0}),n={}):typeof i=="string"?i=lr({dest:i,sync:!0}):(n instanceof js||n.writable||n._writableState)&&(i=n,n=null),n=Object.assign({},e,n),"extreme"in n)throw Error("The extreme option has been removed, use pino.destination({ sync: false }) instead");if("onTerminated"in n)throw Error("The onTerminated option has been removed, use pino.final instead");"changeLevelName"in n&&(process.emitWarning("The changeLevelName option is deprecated and will be removed in v7. Use levelKey instead.",{code:"changeLevelName_deprecation"}),n.levelKey=n.changeLevelName,delete n.changeLevelName);let{enabled:o,prettyPrint:a,prettifier:s,messageKey:u}=n;if(o===!1&&(n.level="silent"),i=i||process.stdout,i===process.stdout&&i.fd>=0&&!Np(i)&&(i=lr({fd:i.fd,sync:!0})),a){let c=Object.assign({messageKey:u},a);i=Gs(c,s,i,r)}return{opts:n,stream:i}}}function Cp(e,t){if(typeof e>"u"||typeof e.child!="function")throw Error("expected a pino logger instance");let r=typeof t<"u";if(r&&typeof t!="function")throw Error("if supplied, the handler parameter should be a function");let n=e[Ip];if(typeof n.flushSync!="function")throw Error("final requires a stream that has a flushSync method, such as pino.destination");let i=new Proxy(e,{get:(o,a)=>a in o.levels.values?(...s)=>{o[a](...s),n.flushSync()}:o[a]});return r?(o=null,...a)=>{try{n.flushSync()}catch{}return t(o,i,...a)}:i}function Fp(e){try{return JSON.stringify(e)}catch{return _p(e)}}function kp(e,t,r){return{level:e,bindings:t,log:r}}function ks(e,t){e[Bs]===!0&&(e.lastLevel=t.lastLevel,e.lastMsg=t.lastMsg,e.lastObj=t.lastObj,e.lastTime=t.lastTime,e.lastLogger=t.lastLogger)}Us.exports={noop:yt,buildSafeSonicBoom:lr,getPrettyStream:Gs,asChindings:Lp,asJson:qp,genLog:Tp,createArgsNormalizer:Dp,final:Cp,stringify:Fp,buildFormatters:kp}});var jn=m((Lb,zs)=>{"use strict";var jp=ar(),{lsCacheSym:Mp,levelValSym:Fn,useOnlyCustomLevelsSym:$p,streamSym:Bp,formattersSym:Hp,hooksSym:Gp}=Le(),{noop:Up,genLog:Ce}=dr(),de={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},Ws={fatal:e=>{let t=Ce(de.fatal,e);return function(...r){let n=this[Bp];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>Ce(de.error,e),warn:e=>Ce(de.warn,e),info:e=>Ce(de.info,e),debug:e=>Ce(de.debug,e),trace:e=>Ce(de.trace,e)},kn=Object.keys(de).reduce((e,t)=>(e[de[t]]=t,e),{}),Wp=Object.keys(kn).reduce((e,t)=>(e[t]=jp('{"level":'+Number(t)),e),{});function zp(e){let t=e[Hp].level,{labels:r}=e.levels,n={};for(let i in r){let o=t(r[i],Number(i));n[i]=JSON.stringify(o).slice(0,-1)}return e[Mp]=n,e}function Vp(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function Jp(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Fn],i=this[Fn]=r[e],o=this[$p],a=this[Gp].logMethod;for(let s in r){if(i>r[s]){this[s]=Up;continue}this[s]=Vp(s,o)?Ws[s](a):Ce(r[s],a)}this.emit("level-change",e,i,t[n],n)}function Kp(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function Yp(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&r>=this[Fn]}function Qp(e=null,t=!1){let r=e?Object.keys(e).reduce((o,a)=>(o[e[a]]=a,o),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:kn,r),i=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:de,e);return{labels:n,values:i}}function Xp(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(o=>t[o]),r?[]:Object.keys(kn).map(o=>+o),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:de,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function Zp(e,t){let{labels:r,values:n}=e;for(let i in t){if(i in n)throw Error("levels cannot be overridden");if(t[i]in r)throw Error("pre-existing level values cannot be used for new levels")}}zs.exports={initialLsCache:Wp,genLsCache:zp,levelMethods:Ws,getLevel:Kp,setLevel:Jp,isLevelEnabled:Yp,mappings:Qp,assertNoLevelCollisions:Zp,assertDefaultLevelFound:Xp}});var Vs=m((Nb,em)=>{em.exports={_args:[["pino@6.14.0","/home/runner/work/xdn/xdn/packages/core"]],_from:"pino@6.14.0",_id:"pino@6.14.0",_inBundle:!1,_integrity:"sha512-iuhEDel3Z3hF9Jfe44DPXR8l07bhjuFY3GMHIXbjnY9XcafbyDDwl2sN2vw2GjMPf5Nkoe+OFao7ffn9SXaKDg==",_location:"/pino",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"pino@6.14.0",name:"pino",escapedName:"pino",rawSpec:"6.14.0",saveSpec:null,fetchSpec:"6.14.0"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/pino/-/pino-6.14.0.tgz",_spec:"6.14.0",_where:"/home/runner/work/xdn/xdn/packages/core",author:{name:"Matteo Collina",email:"hello@matteocollina.com"},bin:{pino:"bin.js"},browser:"./browser.js",bugs:{url:"https://github.com/pinojs/pino/issues"},contributors:[{name:"David Mark Clements",email:"huperekchuno@googlemail.com"},{name:"James Sumners",email:"james.sumners@gmail.com"},{name:"Thomas Watson Steen",email:"w@tson.dk",url:"https://twitter.com/wa7son"}],dependencies:{"fast-redact":"^3.0.0","fast-safe-stringify":"^2.0.8",flatstr:"^1.0.12","pino-std-serializers":"^3.1.0","process-warning":"^1.0.0","quick-format-unescaped":"^4.0.3","sonic-boom":"^1.0.2"},description:"super fast, all natural json logger",devDependencies:{airtap:"4.0.3",benchmark:"^2.1.4",bole:"^4.0.0",bunyan:"^1.8.14","docsify-cli":"^4.4.1",eslint:"^7.17.0","eslint-config-standard":"^16.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^5.1.0",execa:"^5.0.0",fastbench:"^1.0.1","flush-write-stream":"^2.0.0","import-fresh":"^3.2.1",log:"^6.0.0",loglevel:"^1.6.7","pino-pretty":"^5.0.0","pre-commit":"^1.2.2",proxyquire:"^2.1.3",pump:"^3.0.0",semver:"^7.0.0",split2:"^3.1.1",steed:"^1.1.3","strip-ansi":"^6.0.0",tap:"^15.0.1",tape:"^5.0.0",through2:"^4.0.0",winston:"^3.3.3"},files:["pino.js","bin.js","browser.js","pretty.js","usage.txt","test","docs","example.js","lib"],homepage:"http://getpino.io",keywords:["fast","logger","stream","json"],license:"MIT",main:"pino.js",name:"pino",precommit:"test",repository:{type:"git",url:"git+https://github.com/pinojs/pino.git"},scripts:{bench:"node benchmarks/utils/runbench all","bench-basic":"node benchmarks/utils/runbench basic","bench-child":"node benchmarks/utils/runbench child","bench-child-child":"node benchmarks/utils/runbench child-child","bench-child-creation":"node benchmarks/utils/runbench child-creation","bench-deep-object":"node benchmarks/utils/runbench deep-object","bench-formatters":"node benchmarks/utils/runbench formatters","bench-longs-tring":"node benchmarks/utils/runbench long-string","bench-multi-arg":"node benchmarks/utils/runbench multi-arg","bench-object":"node benchmarks/utils/runbench object","browser-test":"airtap --local 8080 test/browser*test.js","cov-ui":"tap --coverage-report=html test/*test.js test/*/*test.js",docs:"docsify serve",lint:"eslint .",test:"npm run lint && tap --100 test/*test.js test/*/*test.js","test-ci":"npm run lint && tap test/*test.js test/*/*test.js --coverage-report=lcovonly","update-bench-doc":"node benchmarks/utils/generate-benchmark-doc > docs/benchmarks.md"},version:"6.14.0"}});var Mn=m((Db,Js)=>{"use strict";var{version:tm}=Vs();Js.exports={version:tm}});var ia=m((Fb,na)=>{"use strict";var{EventEmitter:rm}=require("events"),nm=Pn(),im=ar(),yr=_s(),{lsCacheSym:om,levelValSym:sm,setLevelSym:Bn,getLevelSym:Ks,chindingsSym:Hn,parsedChindingsSym:am,mixinSym:um,asJsonSym:Zs,writeSym:cm,mixinMergeStrategySym:fm,timeSym:lm,timeSliceIndexSym:dm,streamSym:ea,serializersSym:Fe,formattersSym:$n,useOnlyCustomLevelsSym:ym,needsMetadataGsym:pm,redactFmtSym:mm,stringifySym:hm,formatOptsSym:gm,stringifiersSym:vm}=Le(),{getLevel:Sm,setLevel:wm,isLevelEnabled:bm,mappings:Em,initialLsCache:Om,genLsCache:_m,assertNoLevelCollisions:xm}=jn(),{asChindings:ta,asJson:Pm,buildFormatters:Ys,stringify:Qs}=dr(),{version:Rm}=Mn(),Im=En(),Tm=class{},ra={constructor:Tm,child:Am,bindings:qm,setBindings:Lm,flush:Cm,isLevelEnabled:bm,version:Rm,get level(){return this[Ks]()},set level(e){this[Bn](e)},get levelVal(){return this[sm]},set levelVal(e){throw Error("levelVal is read-only")},[om]:Om,[cm]:Dm,[Zs]:Pm,[Ks]:Sm,[Bn]:wm};Object.setPrototypeOf(ra,rm.prototype);na.exports=function(){return Object.create(ra)};var Xs=e=>e;function Am(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Fe],n=this[$n],i=Object.create(this);if(e.hasOwnProperty("serializers")===!0&&(yr.emit("PINODEP004"),t.serializers=e.serializers),e.hasOwnProperty("formatters")===!0&&(yr.emit("PINODEP005"),t.formatters=e.formatters),e.hasOwnProperty("customLevels")===!0&&(yr.emit("PINODEP006"),t.customLevels=e.customLevels),e.hasOwnProperty("level")===!0&&(yr.emit("PINODEP007"),t.level=e.level),t.hasOwnProperty("serializers")===!0){i[Fe]=Object.create(null);for(let f in r)i[Fe][f]=r[f];let u=Object.getOwnPropertySymbols(r);for(var o=0;o<u.length;o++){let f=u[o];i[Fe][f]=r[f]}for(let f in t.serializers)i[Fe][f]=t.serializers[f];let c=Object.getOwnPropertySymbols(t.serializers);for(var a=0;a<c.length;a++){let f=c[a];i[Fe][f]=t.serializers[f]}}else i[Fe]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:c,log:f}=t.formatters;i[$n]=Ys(u||n.level,c||Xs,f||n.log)}else i[$n]=Ys(n.level,Xs,n.log);if(t.hasOwnProperty("customLevels")===!0&&(xm(this.levels,t.customLevels),i.levels=Em(t.customLevels,i[ym]),_m(i)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){i.redact=t.redact;let u=Im(i.redact,Qs),c={stringify:u[mm]};i[hm]=Qs,i[vm]=u,i[gm]=c}i[Hn]=ta(i,e);let s=t.level||this.level;return i[Bn](s),i}function qm(){let t=`{${this[Hn].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function Lm(e){let t=ta(this,e);this[Hn]=t,delete this[am]}function Nm(e,t){return Object.assign(t,e)}function Dm(e,t,r){let n=this[lm](),i=this[um],o=this[fm]||Nm,a=e instanceof Error,s;e==null?s=i?i({}):{}:(s=o(e,i?i(e):{}),!t&&a&&(t=e.message),a&&(s.stack=e.stack,s.type||(s.type="Error")));let u=this[Zs](s,t,r,n),c=this[ea];c[pm]===!0&&(c.lastLevel=r,c.lastObj=s,c.lastMsg=t,c.lastTime=n.slice(this[dm]),c.lastLogger=this),c instanceof nm?c.write(u):c.write(im(u))}function Cm(){let e=this[ea];"flush"in e&&e.flush()}});var ma=m((kb,te)=>{"use strict";var Fm=require("os"),fa=hn(),km=En(),la=ms(),jm=ia(),da=Le(),{assertDefaultLevelFound:Mm,mappings:ya,genLsCache:$m}=jn(),{createArgsNormalizer:Bm,asChindings:Hm,final:Gm,stringify:pr,buildSafeSonicBoom:Gn,buildFormatters:Um,noop:Wm}=dr(),{version:zm}=Mn(),{mixinMergeStrategySym:Vm}=Le(),{chindingsSym:oa,redactFmtSym:Jm,serializersSym:sa,timeSym:Km,timeSliceIndexSym:Ym,streamSym:Qm,stringifySym:aa,stringifiersSym:ua,setLevelSym:Xm,endSym:Zm,formatOptsSym:eh,messageKeySym:th,nestedKeySym:rh,mixinSym:nh,useOnlyCustomLevelsSym:ih,formattersSym:ca,hooksSym:oh}=da,{epochTime:pa,nullTime:sh}=la,{pid:ah}=process,uh=Fm.hostname(),ch=fa.err,Un={level:"info",messageKey:"msg",nestedKey:null,enabled:!0,prettyPrint:!1,base:{pid:ah,hostname:uh},serializers:Object.assign(Object.create(null),{err:ch}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0},timestamp:pa,name:void 0,redact:null,customLevels:null,levelKey:void 0,useOnlyCustomLevels:!1},fh=Bm(Un),lh=Object.assign(Object.create(null),fa);function Wn(...e){let t={},{opts:r,stream:n}=fh(t,...e),{redact:i,crlf:o,serializers:a,timestamp:s,messageKey:u,nestedKey:c,base:f,name:l,level:d,customLevels:y,useLevelLabels:p,changeLevelName:h,levelKey:v,mixin:g,mixinMergeStrategy:R,useOnlyCustomLevels:E,formatters:I,hooks:F}=r,B=Um(I.level,I.bindings,I.log);p&&!(h||v)?(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),B.level=dh):(h||v)&&!p?(process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),B.level=yh(h||v)):(h||v)&&p&&(process.emitWarning("useLevelLabels is deprecated, use the formatters.level option instead","Warning","PINODEP001"),process.emitWarning("changeLevelName and levelKey are deprecated, use the formatters.level option instead","Warning","PINODEP002"),B.level=ph(h||v)),a[Symbol.for("pino.*")]&&(process.emitWarning("The pino.* serializer is deprecated, use the formatters.log options instead","Warning","PINODEP003"),B.log=a[Symbol.for("pino.*")]),B.bindings||(B.bindings=Un.formatters.bindings),B.level||(B.level=Un.formatters.level);let X=i?km(i,pr):{},ie=i?{stringify:X[Jm]}:{stringify:pr},S="}"+(o?`\r
`:`
`),b=Hm.bind(null,{[oa]:"",[sa]:a,[ua]:X,[aa]:pr,[ca]:B}),w="";f!==null&&(l===void 0?w=b(f):w=b(Object.assign({},f,{name:l})));let D=s instanceof Function?s:s?pa:sh,P=D().indexOf(":")+1;if(E&&!y)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(g&&typeof g!="function")throw Error(`Unknown mixin type "${typeof g}" - expected "function"`);Mm(d,y,E);let T=ya(y,E);return Object.assign(t,{levels:T,[ih]:E,[Qm]:n,[Km]:D,[Ym]:P,[aa]:pr,[ua]:X,[Zm]:S,[eh]:ie,[th]:u,[rh]:c,[sa]:a,[nh]:g,[Vm]:R,[oa]:w,[ca]:B,[oh]:F,silent:Wm}),Object.setPrototypeOf(t,jm()),$m(t),t[Xm](d),t}function dh(e,t){return{level:e}}function yh(e){return function(t,r){return{[e]:r}}}function ph(e){return function(t,r){return{[e]:t}}}te.exports=Wn;te.exports.extreme=(e=process.stdout.fd)=>(process.emitWarning("The pino.extreme() option is deprecated and will be removed in v7. Use pino.destination({ sync: false }) instead.",{code:"extreme_deprecation"}),Gn({dest:e,minLength:4096,sync:!1}));te.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=e.dest||process.stdout.fd,Gn(e)):Gn({dest:e,minLength:0,sync:!0});te.exports.final=Gm;te.exports.levels=ya();te.exports.stdSerializers=lh;te.exports.stdTimeFunctions=Object.assign({},la);te.exports.symbols=da;te.exports.version=zm;te.exports.default=Wn;te.exports.pino=Wn});function gh(e,t){e.length>=2?t.apply(this,[e.map(r=>typeof r=="string"?"%s":"%j").join(" "),...e]):t.apply(this,e)}var mr,mh,hh,se,pt,Z,ha=j(()=>{"use strict";mr={awsTag:"userLogs"},mh=require("util"),hh=ma(),se={assert:console.assert,debug:console.debug,dir:console.dir,error:console.error,info:console.info,log:console.log,time:console.time,timeEnd:console.timeEnd,timeLog:console.timeLog,trace:console.trace,warn:console.warn},pt={};Z=class{static _assert(t,...r){t||console.info(...r)}static _dir(...t){console.info(mh.inspect(...t))}static _time(t){pt[t]=Date.now()}static _timeEnd(t){Z._timeLog(t)}static _timeLog(t,...r){if(!pt[t]){console.warn(`Warning: No such label '${t}' for console.timeEnd()`);return}let n=Date.now()-pt[t];pt[t]=Date.now(),console.info(`${t}: ${n}ms`,...r)}static enable({clientIp:t,requestId:r,wi:n}={}){pt={};let i=hh({base:{...mr,wi:n},timestamp:!0,hooks:{logMethod:gh}});t&&(i=i.child({clientIp:t})),r&&(i=i.child({requestId:r})),console.assert=Z._assert,console.debug=i.debug.bind(i),console.dir=Z._dir,console.error=i.error.bind(i),console.info=i.info.bind(i),console.log=i.info.bind(i),console.time=Z._time,console.timeEnd=Z._timeEnd,console.timeLog=Z._timeLog,console.trace=i.trace.bind(i),console.warn=i.warn.bind(i)}static disable(){console.assert=se.assert,console.debug=se.debug,console.dir=se.dir,console.error=se.error,console.info=se.info,console.log=se.log,console.time=se.time,console.timeEnd=se.timeEnd,console.timeLog=se.timeLog,console.trace=se.trace,console.warn=se.warn}}});var va={};Ie(va,{ACTIONS:()=>Oh,BACKENDS:()=>pe,BROTLI_ENCODING:()=>Se,CACHEABLE_METHODS:()=>Ph,CACHING_STATUS:()=>xh,DEVTOOLS_PREFETCH_QUERY_PARAM:()=>Th,EDGIO_ASSET_ALIASES_FILE:()=>vh,EDGIO_CONFIG_FILE:()=>gr,EDGIO_DEPLOYMENT_TYPE_AWS:()=>zn,EDGIO_ENV_VARIABLES:()=>ye,EDGIO_HEADERS_PREFIX:()=>Sh,EDGIO_IMAGE_OPTIMIZER_PATH:()=>kh,EDGIO_MAX_USER_HEADERS_ALLOWED:()=>wh,EDGIO_TOO_MANY_HEADERS_STATUS_CODE:()=>bh,EDGIO_UNCACHED_PREFETCH_STATUS:()=>Eh,GZIP_ENCODING:()=>we,HEAD_QUERY_PARAM:()=>Ah,HOSTS_NOINDEX_PERMALINK_REGEX:()=>Fh,HTTP_HEADERS:()=>N,HTTP_METHODS:()=>_h,IS_BROWSER:()=>jh,JS_BACKEND_HOSTNAME:()=>Vn,LAYER0_CONFIG_FILE:()=>hr,METHOD_QUERY_PARAM:()=>Lh,POST_BODY_QUERY_PARAM:()=>qh,PREFETCH_QUERY_PARAM:()=>Rh,PREFETCH_TTL_PARAM:()=>Ih,ROUTES_CATCH_GROUP:()=>Dh,ROUTES_FALLBACK:()=>Nh,ROUTES_NOINDEX_GROUP:()=>Ch,THROTTLED_QUERY_PARAM:()=>ga});var hr,gr,vh,ye,zn,Sh,wh,bh,Eh,Oh,pe,Vn,_h,N,xh,Ph,ga,Rh,Ih,Th,Ah,qh,Lh,Nh,Dh,Ch,Fh,kh,jh,Se,we,ae=j(()=>{"use strict";hr="layer0.config.js",gr="edgio.config.js",vh="asset-aliases.json",ye={config:"EDGIO_CONFIG",deploymentType:"EDGIO_DEPLOYMENT_TYPE",versionOverride:"EDGIO_VERSION_OVERRIDE",productionBuild:"EDGIO_PRODUCTION_BUILD"},zn="AWS",Sh="x-0-",wh=70,bh=542,Eh=412,Oh={setHeader:"set-header",updateHeader:"update-header",removeHeader:"remove-header",syntheticRes:"synthetic-response",updatePath:"update-path",proxy:"proxy",addCookie:"add-cookie",updateCookie:"update-cookie",removeCookie:"remove-cookie"},pe={js:"__js__",static:"__static__",permanentStatic:"__permanent_static__",imageOptimizer:"__image_optimizer__"},Vn="127.0.0.1",_h={head:"head",get:"get",post:"post",delete:"delete",put:"put",patch:"patch",options:"options"},N={acceptEncoding:"accept-encoding",authorization:"authorization",cacheControl:"cache-control",contentEncoding:"content-encoding",contentLength:"content-length",contentType:"content-type",cookie:"cookie",host:"host",location:"location",serverTiming:"server-timing",setCookie:"set-cookie",userAgent:"user-agent",vary:"vary",via:"via",x0Browser:"x-0-browser",x0CacheControl:"x-0-cache-control",x0CacheVersion:"x-0-cache-version",x0CachingStatus:"x-0-caching-status",x0ClientIp:"x-0-client-ip",x0Components:"x-0-components",x0Destination:"x-0-destination",x0Device:"x-0-device",x0DeviceIsBot:"x-0-device-is-bot",x0GeoCity:"x-0-geo-city",x0GeoCountryCode:"x-0-geo-country-code",x0GeoLatitude:"x-0-geo-latitude",x0GeoLongitude:"x-0-geo-longitude",x0GeoPostalCode:"x-0-geo-postal-code",x0MatchedRoutes:"x-0-matched-routes",x0Protocol:"x-0-protocol",x0Route:"x-0-route",x0Status:"x-0-status",x0SurrogateKey:"x-0-surrogate-key",x0T:"x-0-t",x0UserT:"x-0-user-t",x0Vendor:"x-0-vendor",x0Version:"x-0-version",xForwardedFor:"x-forwarded-for",xRequestId:"x-request-id",xSwCacheControl:"x-sw-cache-control"},xh={ok:"ok",private:"private",method:"method",bodyTooBig:"body-too-big",code:"code",setCookie:"set-cookie",noMaxAge:"no-max-age"},Ph=new Set(["get","head"]),ga="edgio_prefetch",Rh=ga,Ih="edgio_prefetch_ttl",Th="edgio_dt_pf",Ah="edgio_head",qh="pref_edgio_body",Lh="pref_edgio_method",Nh="fallback",Dh="catch",Ch="noindex",Fh=/\.layer0\.link|\.layer0-perma\.link|\.edgio\.link|\.edgio-perma\.link|\.layer0-limelight\.link/,kh="/__layer0_image_optimizer",jh=typeof window<"u",Se="br",we="gzip"});var wa={};Ie(wa,{isBrowser:()=>$h,isCloud:()=>vr,isEdgioRunDev:()=>Mh,isLocal:()=>mt,isProductionBuild:()=>Sa});function vr(){return process.env[ye.deploymentType]===zn}function mt(){return process.env.EDGIO_LOCAL==="true"}function Sa(){return process.env.NODE_ENV==="production"||process.env[ye.productionBuild]==="true"}function Mh(){return!vr()&&!Sa()}function $h(){return typeof window<"u"}var ht=j(()=>{"use strict";ae()});var Oa={};Ie(Oa,{deepRequestInspectionLogger:()=>Kn,default:()=>br});function Uh(e){return e.indexOf(Gh)>=0}function Kn(e){function t(s,u){try{process.env.EDGIO_HTTP_REQUEST_LOGGING==="1"&&(wr.stdoutWrite.apply(process.stdout,[JSON.stringify({level:u,time:Date.now(),wi:e.id,...Jn,data:s})]),wr.stdoutWrite.apply(process.stdout,[`
`]))}catch(c){console.error(`Error while logging HTTP request info at level ${u}: ${c&&c.message}`)}}function r(s){return t(s,Wh)}function n(s){return t(s,zh)}function i(s){return t(s,Vh)}function o(s){return t(s,Jh)}function a(s){return t(s,Kh)}return{logDownstreamRequestInfo:r,logDownstreamResponseInfo:n,logUpstreamRequestInfo:i,logUpstreamResponseInfo:o,logUpstreamResponseBodyInfo:a}}function Ea(e,t){let r=e.write;e.write=function(n,...i){let o;typeof n=="object"?o=Buffer.from(n).toString():o=n;let a={time:Date.now()};return n&&!Uh(o)&&(n=JSON.stringify({...t,...a,msg:o})+`
`),r.apply(e,[n,...i])}}var ba,wr,Bh,Hh,Sr,Gh,Wh,zh,Vh,Jh,Kh,Jn,Yh,br,Yn=j(()=>{"use strict";ha();ba=(ht(),Ae(wa)),wr={stdoutWrite:process.stdout.write,stderrWrite:process.stderr.write},Bh=50,Hh=30,Sr=0,Gh=JSON.stringify(mr).replace("{","").replace("}","");Wh=100,zh=101,Vh=102,Jh=103,Kh=104,Jn={};Yh={enable:({clientIp:e,requestId:t,wi:r}={})=>{if(!!ba.isCloud()){if(Sr===0){let n=mr;e&&(n={...n,clientIp:e}),t&&(n={...n,requestId:t}),r&&(n={...n,wi:r}),Jn=n,Ea(process.stdout,{level:Hh,...n}),Ea(process.stderr,{level:Bh,...n}),Z.enable({clientIp:e,requestId:t,wi:r})}Sr++}},disable:()=>{!ba.isCloud()||(Sr--,Sr===0&&(process.stdout.write=wr.stdoutWrite,process.stderr.write=wr.stderrWrite,Jn={},Z.disable()))}},br=Yh});var xa={};Ie(xa,{default:()=>gt});function Qn(e){return Buffer.from(e).toString("base64")}function Qh(e){if(!e)return;let t=e[N.contentEncoding];if(!t){for(let r of Object.keys(e))if(r.toLowerCase()===N.contentEncoding){t=e[r];break}}return Array.isArray(t)&&(t.length?t=t[0]:t=void 0),t}function gt(e,t){var r;try{if(!e||e.length===0)return{};let n;if(typeof e=="string")n=Buffer.from(e,"base64");else if(Buffer.isBuffer(e))n=e;else if(Array.isArray(e))n=Buffer.concat(e);else return{body:Qn(`Unknown body format: ${typeof e}`),bodyLength:e.length,bodyTruncated:!0};let i=(r=Qh(t))==null?void 0:r.toLowerCase();try{switch(i){case we:{n=(0,Er.gunzipSync)(n);break}case Se:{n=(0,Er.brotliDecompressSync)(n);break}default:}}catch(o){return{body:Qn(`Error while decompressing the body [${i}]: ${o.message}`),bodyLength:n.length,bodyTruncated:!0}}return{body:n.slice(0,_a).toString("base64"),bodyLength:n.length,bodyTruncated:n.length>_a}}catch(n){return{body:Qn(`Error while getting body logging data: ${n&&n.message}`),bodyLength:e.length,bodyTruncated:!0}}}var Er,_a,Xn=j(()=>{"use strict";Er=require("zlib");ae();_a=8*1024});var Ca=m((Hb,Da)=>{"use strict";var{inherits:Xh}=require("util"),{deepRequestInspectionLogger:Zh}=(Yn(),Ae(Oa)),_r=require("http"),Pa=require("https"),eg=require("url"),{HTTP_HEADERS:We}=(ae(),Ae(va)),Ra=(Xn(),Ae(xa)).default,tg=/^xdn-user-assets-[a-zA-Z0-9-]+-[0-9]+\.s3\.amazonaws\.com$/;function Ia(e){let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,hash:e.hash,search:e.search,pathname:e.pathname,path:`${e.pathname||""}${e.search||""}`,href:e.href};return e.port!==""&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username}:${e.password}`),t}var Ta=!1,rg=Symbol("query"),Zn=rg;function Aa(e,t,r){if(typeof e=="string"){let n=e;try{e=Ia(new URL(n))}catch(i){if(e=eg.parse(n),!e.hostname)throw i;!Ta&&!process.noDeprecation&&(Ta=!0,process.emitWarning(`The provided URL ${n} is not a valid URL, and is supported in the http module solely for compatibility.`,"DeprecationWarning","DEP0109"))}}else e&&e[Zn]&&e[Zn][Zn]?e=Ia(e):(r=t,t=e,e=null);return typeof t=="function"?(r=t,t=e||{}):t=Object.assign(e||{},t),{options:t,callback:r}}var ei=_r.ClientRequest,qa=0,Or=[],vt={},La="Layer0",Na=null;function ng(e){let t=null,r=e&&e.multiValueHeaders||{};for(let[n,i]of Object.entries(r))if(n.toLowerCase()===We.via){t=i;break}return t||(t="Layer0"),/\bLayer0\b/.test(t)||(t=t+", Layer0"),t}function ig(e){let t=e&&e.multiValueHeaders||{};for(let[r,n]of Object.entries(t))if(r.toLowerCase()===We.x0CacheVersion)return n}function og(e,t,r){for(let n of Object.keys(e)){let i=n.toLowerCase();(i===We.via||i===We.x0CacheVersion)&&delete e[n]}t&&(e[We.via]=t),r&&(e[We.x0CacheVersion]=r)}function ti(...e){let{options:t,callback:r}=Aa(...e);t.headers||(t.headers={}),og(t.headers,La,Na);let n=t.hostname||t.host;if(n&&(["127.0.0.1","0.0.0.0","::1","0:0:0:0:0:0:0:1","localhost"].includes(n)||tg.test(n)))ei.call(this,t,r);else{let o=sg(this,t,r);ei.call(this,t,o)}}function sg(e,t,r){let n=qa++;Or[n]=Date.now();let i={method:t.method,protocol:t.protocol,host:t.hostname||t.host,port:t.port,path:t.path},o=new Zh(vt.lambdaInstance),a=c=>{let f=[];if(c.once("end",()=>{o.logUpstreamResponseBodyInfo({id:n,...i,...Ra(f,c.headers)})}),vt.enableHttpRequestLogging){o.logUpstreamResponseInfo({id:n,...i,statusCode:c.statusCode,statusMessage:c.statusMessage,headers:c.headers,duration:Date.now()-Or[n]});let l,{setEncoding:d}=c;c.setEncoding=function(p){return l=p,d.apply(this,arguments)};let y=c.push;c.push=function(p){return p&&(l&&(p=Buffer.from(p,l)),f.push(p)),y.call(c,p)}}r&&r(c)},s=[],u=function(c,f){if(Buffer.isBuffer(c)||typeof c=="string"){let l=c;Buffer.isBuffer(l)||(typeof f!="string"&&(f=null),l=Buffer.from(c,f)),s.push(l)}};return e.write=function(c,f,l){return u(c,f),Object.getPrototypeOf(Object.getPrototypeOf(e)).write.call(e,c,f,l)}.bind(e),e.end=function(c,f,l){return u(c,f),vt.enableHttpRequestLogging&&o.logUpstreamRequestInfo({id:n,...i,headers:t.headers,...Ra(s,t.headers)}),Object.getPrototypeOf(Object.getPrototypeOf(e)).end.call(e,c,f,l)}.bind(e),e.once("error",c=>{vt.enableHttpRequestLogging&&o.logUpstreamResponseInfo({id:n,...i,duration:Date.now()-Or[n],code:c&&c.code,error:c&&c.message})}),a}Xh(ti,_r.ClientRequest);var ri=ei;_r.request=function(t,r,n){return new ri(t,r,n)};Pa.request=function(...t){let{options:r,callback:n}=Aa(...t);return r._defaultAgent=Pa.globalAgent,new ri(r,n)};ri=ti;_r.ClientRequest=ti;function ag(e,t){qa=0,Or=[],vt=t||{},La=ng(e),Na=ig(e)}Da.exports={interceptRequests:ag}});var Y=m(ni=>{"use strict";ni.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]=="function")e.apply(this,arguments);else return new Promise((t,r)=>{arguments[arguments.length]=(n,i)=>{if(n)return r(n);t(i)},arguments.length++,e.apply(this,arguments)})},"name",{value:e.name})};ni.fromPromise=function(e){return Object.defineProperty(function(){let t=arguments[arguments.length-1];if(typeof t!="function")return e.apply(this,arguments);e.apply(this,arguments).then(r=>t(null,r),t)},"name",{value:e.name})}});var ka=m((Ub,Fa)=>{var Ee=require("constants"),ug=process.cwd,xr=null,cg=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return xr||(xr=ug.call(process)),xr};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ii=process.chdir,process.chdir=function(e){xr=null,ii.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ii));var ii;Fa.exports=fg;function fg(e){Ee.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=a(e.chownSync),e.fchownSync=a(e.fchownSync),e.lchownSync=a(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=s(e.stat),e.fstat=s(e.fstat),e.lstat=s(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(f,l,d){d&&process.nextTick(d)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(f,l,d,y){y&&process.nextTick(y)},e.lchownSync=function(){}),cg==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(f){function l(d,y,p){var h=Date.now(),v=0;f(d,y,function g(R){if(R&&(R.code==="EACCES"||R.code==="EPERM")&&Date.now()-h<6e4){setTimeout(function(){e.stat(y,function(E,I){E&&E.code==="ENOENT"?f(d,y,g):p(R)})},v),v<100&&(v+=10);return}p&&p(R)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,f),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(f){function l(d,y,p,h,v,g){var R;if(g&&typeof g=="function"){var E=0;R=function(I,F,B){if(I&&I.code==="EAGAIN"&&E<10)return E++,f.call(e,d,y,p,h,v,R);g.apply(this,arguments)}}return f.call(e,d,y,p,h,v,R)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,f),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(f){return function(l,d,y,p,h){for(var v=0;;)try{return f.call(e,l,d,y,p,h)}catch(g){if(g.code==="EAGAIN"&&v<10){v++;continue}throw g}}}(e.readSync);function t(f){f.lchmod=function(l,d,y){f.open(l,Ee.O_WRONLY|Ee.O_SYMLINK,d,function(p,h){if(p){y&&y(p);return}f.fchmod(h,d,function(v){f.close(h,function(g){y&&y(v||g)})})})},f.lchmodSync=function(l,d){var y=f.openSync(l,Ee.O_WRONLY|Ee.O_SYMLINK,d),p=!0,h;try{h=f.fchmodSync(y,d),p=!1}finally{if(p)try{f.closeSync(y)}catch{}else f.closeSync(y)}return h}}function r(f){Ee.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(l,d,y,p){f.open(l,Ee.O_SYMLINK,function(h,v){if(h){p&&p(h);return}f.futimes(v,d,y,function(g){f.close(v,function(R){p&&p(g||R)})})})},f.lutimesSync=function(l,d,y){var p=f.openSync(l,Ee.O_SYMLINK),h,v=!0;try{h=f.futimesSync(p,d,y),v=!1}finally{if(v)try{f.closeSync(p)}catch{}else f.closeSync(p)}return h}):f.futimes&&(f.lutimes=function(l,d,y,p){p&&process.nextTick(p)},f.lutimesSync=function(){})}function n(f){return f&&function(l,d,y){return f.call(e,l,d,function(p){c(p)&&(p=null),y&&y.apply(this,arguments)})}}function i(f){return f&&function(l,d){try{return f.call(e,l,d)}catch(y){if(!c(y))throw y}}}function o(f){return f&&function(l,d,y,p){return f.call(e,l,d,y,function(h){c(h)&&(h=null),p&&p.apply(this,arguments)})}}function a(f){return f&&function(l,d,y){try{return f.call(e,l,d,y)}catch(p){if(!c(p))throw p}}}function s(f){return f&&function(l,d,y){typeof d=="function"&&(y=d,d=null);function p(h,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),y&&y.apply(this,arguments)}return d?f.call(e,l,d,p):f.call(e,l,p)}}function u(f){return f&&function(l,d){var y=d?f.call(e,l,d):f.call(e,l);return y&&(y.uid<0&&(y.uid+=4294967296),y.gid<0&&(y.gid+=4294967296)),y}}function c(f){if(!f||f.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var $a=m((Wb,Ma)=>{var ja=require("stream").Stream;Ma.exports=lg;function lg(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);ja.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),s=0,u=a.length;s<u;s++){var c=a[s];this[c]=i[c]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(f,l){if(f){o.emit("error",f),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);ja.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),a=0,s=o.length;a<s;a++){var u=o[a];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Ha=m((zb,Ba)=>{"use strict";Ba.exports=yg;var dg=Object.getPrototypeOf||function(e){return e.__proto__};function yg(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:dg(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var $=m((Vb,ai)=>{var k=require("fs"),pg=ka(),mg=$a(),hg=Ha(),Pr=require("util"),U,Ir;typeof Symbol=="function"&&typeof Symbol.for=="function"?(U=Symbol.for("graceful-fs.queue"),Ir=Symbol.for("graceful-fs.previous")):(U="___graceful-fs.queue",Ir="___graceful-fs.previous");function gg(){}function Wa(e,t){Object.defineProperty(e,U,{get:function(){return t}})}var ke=gg;Pr.debuglog?ke=Pr.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(ke=function(){var e=Pr.format.apply(Pr,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});k[U]||(Ga=global[U]||[],Wa(k,Ga),k.close=function(e){function t(r,n){return e.call(k,r,function(i){i||Ua(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Ir,{value:e}),t}(k.close),k.closeSync=function(e){function t(r){e.apply(k,arguments),Ua()}return Object.defineProperty(t,Ir,{value:e}),t}(k.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){ke(k[U]),require("assert").equal(k[U].length,0)}));var Ga;global[U]||Wa(global,k[U]);ai.exports=oi(hg(k));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!k.__patched&&(ai.exports=oi(k),k.__patched=!0);function oi(e){pg(e),e.gracefulify=oi,e.createReadStream=F,e.createWriteStream=B;var t=e.readFile;e.readFile=r;function r(S,b,w){return typeof b=="function"&&(w=b,b=null),D(S,b,w);function D(P,T,_,A){return t(P,T,function(q){q&&(q.code==="EMFILE"||q.code==="ENFILE")?ze([D,[P,T,_],q,A||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(S,b,w,D){return typeof w=="function"&&(D=w,w=null),P(S,b,w,D);function P(T,_,A,q,M){return n(T,_,A,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?ze([P,[T,_,A,q],L,M||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=a);function a(S,b,w,D){return typeof w=="function"&&(D=w,w=null),P(S,b,w,D);function P(T,_,A,q,M){return o(T,_,A,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?ze([P,[T,_,A,q],L,M||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var s=e.copyFile;s&&(e.copyFile=u);function u(S,b,w,D){return typeof w=="function"&&(D=w,w=0),P(S,b,w,D);function P(T,_,A,q,M){return s(T,_,A,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?ze([P,[T,_,A,q],L,M||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}var c=e.readdir;e.readdir=l;var f=/^v[0-5]\./;function l(S,b,w){typeof b=="function"&&(w=b,b=null);var D=f.test(process.version)?function(_,A,q,M){return c(_,P(_,A,q,M))}:function(_,A,q,M){return c(_,A,P(_,A,q,M))};return D(S,b,w);function P(T,_,A,q){return function(M,L){M&&(M.code==="EMFILE"||M.code==="ENFILE")?ze([D,[T,_,A],M,q||Date.now(),Date.now()]):(L&&L.sort&&L.sort(),typeof A=="function"&&A.call(this,M,L))}}}if(process.version.substr(0,4)==="v0.8"){var d=mg(e);g=d.ReadStream,E=d.WriteStream}var y=e.ReadStream;y&&(g.prototype=Object.create(y.prototype),g.prototype.open=R);var p=e.WriteStream;p&&(E.prototype=Object.create(p.prototype),E.prototype.open=I),Object.defineProperty(e,"ReadStream",{get:function(){return g},set:function(S){g=S},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return E},set:function(S){E=S},enumerable:!0,configurable:!0});var h=g;Object.defineProperty(e,"FileReadStream",{get:function(){return h},set:function(S){h=S},enumerable:!0,configurable:!0});var v=E;Object.defineProperty(e,"FileWriteStream",{get:function(){return v},set:function(S){v=S},enumerable:!0,configurable:!0});function g(S,b){return this instanceof g?(y.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}function R(){var S=this;ie(S.path,S.flags,S.mode,function(b,w){b?(S.autoClose&&S.destroy(),S.emit("error",b)):(S.fd=w,S.emit("open",w),S.read())})}function E(S,b){return this instanceof E?(p.apply(this,arguments),this):E.apply(Object.create(E.prototype),arguments)}function I(){var S=this;ie(S.path,S.flags,S.mode,function(b,w){b?(S.destroy(),S.emit("error",b)):(S.fd=w,S.emit("open",w))})}function F(S,b){return new e.ReadStream(S,b)}function B(S,b){return new e.WriteStream(S,b)}var X=e.open;e.open=ie;function ie(S,b,w,D){return typeof w=="function"&&(D=w,w=null),P(S,b,w,D);function P(T,_,A,q,M){return X(T,_,A,function(L,jw){L&&(L.code==="EMFILE"||L.code==="ENFILE")?ze([P,[T,_,A,q],L,M||Date.now(),Date.now()]):typeof q=="function"&&q.apply(this,arguments)})}}return e}function ze(e){ke("ENQUEUE",e[0].name,e[1]),k[U].push(e),si()}var Rr;function Ua(){for(var e=Date.now(),t=0;t<k[U].length;++t)k[U][t].length>2&&(k[U][t][3]=e,k[U][t][4]=e);si()}function si(){if(clearTimeout(Rr),Rr=void 0,k[U].length!==0){var e=k[U].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)ke("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){ke("TIMEOUT",t.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n)}else{var s=Date.now()-o,u=Math.max(o-i,1),c=Math.min(u*1.2,100);s>=c?(ke("RETRY",t.name,r),t.apply(null,r.concat([i]))):k[U].push(e)}Rr===void 0&&(Rr=setTimeout(si,0))}}});var ui=m(je=>{"use strict";var za=Y().fromCallback,re=$(),vg=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof re[e]=="function");Object.keys(re).forEach(e=>{e!=="promises"&&(je[e]=re[e])});vg.forEach(e=>{je[e]=za(re[e])});je.exists=function(e,t){return typeof t=="function"?re.exists(e,t):new Promise(r=>re.exists(e,r))};je.read=function(e,t,r,n,i,o){return typeof o=="function"?re.read(e,t,r,n,i,o):new Promise((a,s)=>{re.read(e,t,r,n,i,(u,c,f)=>{if(u)return s(u);a({bytesRead:c,buffer:f})})})};je.write=function(e,t,...r){return typeof r[r.length-1]=="function"?re.write(e,t,...r):new Promise((n,i)=>{re.write(e,t,...r,(o,a,s)=>{if(o)return i(o);n({bytesWritten:a,buffer:s})})})};typeof re.realpath.native=="function"&&(je.realpath.native=za(re.realpath.native))});var fi=m((Kb,Ja)=>{"use strict";var ci=require("path");function Va(e){return e=ci.normalize(ci.resolve(e)).split(ci.sep),e.length>0?e[0]:null}var Sg=/[<>:"|?*]/;function wg(e){let t=Va(e);return e=e.replace(t,""),Sg.test(e)}Ja.exports={getRootPath:Va,invalidWin32Path:wg}});var Ya=m((Yb,Ka)=>{"use strict";var bg=$(),li=require("path"),Eg=fi().invalidWin32Path,Og=parseInt("0777",8);function di(e,t,r,n){if(typeof t=="function"?(r=t,t={}):(!t||typeof t!="object")&&(t={mode:t}),process.platform==="win32"&&Eg(e)){let a=new Error(e+" contains invalid WIN32 path characters.");return a.code="EINVAL",r(a)}let i=t.mode,o=t.fs||bg;i===void 0&&(i=Og&~process.umask()),n||(n=null),r=r||function(){},e=li.resolve(e),o.mkdir(e,i,a=>{if(!a)return n=n||e,r(null,n);switch(a.code){case"ENOENT":if(li.dirname(e)===e)return r(a);di(li.dirname(e),t,(s,u)=>{s?r(s,u):di(e,t,r,u)});break;default:o.stat(e,(s,u)=>{s||!u.isDirectory()?r(a,n):r(null,n)});break}})}Ka.exports=di});var Xa=m((Qb,Qa)=>{"use strict";var _g=$(),yi=require("path"),xg=fi().invalidWin32Path,Pg=parseInt("0777",8);function pi(e,t,r){(!t||typeof t!="object")&&(t={mode:t});let n=t.mode,i=t.fs||_g;if(process.platform==="win32"&&xg(e)){let o=new Error(e+" contains invalid WIN32 path characters.");throw o.code="EINVAL",o}n===void 0&&(n=Pg&~process.umask()),r||(r=null),e=yi.resolve(e);try{i.mkdirSync(e,n),r=r||e}catch(o){if(o.code==="ENOENT"){if(yi.dirname(e)===e)throw o;r=pi(yi.dirname(e),t,r),pi(e,t,r)}else{let a;try{a=i.statSync(e)}catch{throw o}if(!a.isDirectory())throw o}}return r}Qa.exports=pi});var ee=m((Xb,Za)=>{"use strict";var Rg=Y().fromCallback,mi=Rg(Ya()),hi=Xa();Za.exports={mkdirs:mi,mkdirsSync:hi,mkdirp:mi,mkdirpSync:hi,ensureDir:mi,ensureDirSync:hi}});var gi=m((Zb,tu)=>{"use strict";var V=$(),eu=require("os"),Tr=require("path");function Ig(){let e=Tr.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=Tr.join(eu.tmpdir(),e);let t=new Date(1435410243862);V.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");let r=V.openSync(e,"r+");return V.futimesSync(r,t,t),V.closeSync(r),V.statSync(e).mtime>1435410243e3}function Tg(e){let t=Tr.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=Tr.join(eu.tmpdir(),t);let r=new Date(1435410243862);V.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",n=>{if(n)return e(n);V.open(t,"r+",(i,o)=>{if(i)return e(i);V.futimes(o,r,r,a=>{if(a)return e(a);V.close(o,s=>{if(s)return e(s);V.stat(t,(u,c)=>{if(u)return e(u);e(null,c.mtime>1435410243e3)})})})})})}function Ag(e){if(typeof e=="number")return Math.floor(e/1e3)*1e3;if(e instanceof Date)return new Date(Math.floor(e.getTime()/1e3)*1e3);throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}function qg(e,t,r,n){V.open(e,"r+",(i,o)=>{if(i)return n(i);V.futimes(o,t,r,a=>{V.close(o,s=>{n&&n(a||s)})})})}function Lg(e,t,r){let n=V.openSync(e,"r+");return V.futimesSync(n,t,r),V.closeSync(n)}tu.exports={hasMillisRes:Tg,hasMillisResSync:Ig,timeRemoveMillis:Ag,utimesMillis:qg,utimesMillisSync:Lg}});var bt=m((eE,au)=>{"use strict";var ne=$(),Q=require("path"),ru=10,nu=5,Ng=0,Si=process.versions.node.split("."),iu=Number.parseInt(Si[0],10),ou=Number.parseInt(Si[1],10),Dg=Number.parseInt(Si[2],10);function St(){if(iu>ru)return!0;if(iu===ru){if(ou>nu)return!0;if(ou===nu&&Dg>=Ng)return!0}return!1}function Cg(e,t,r){St()?ne.stat(e,{bigint:!0},(n,i)=>{if(n)return r(n);ne.stat(t,{bigint:!0},(o,a)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:a}))}):ne.stat(e,(n,i)=>{if(n)return r(n);ne.stat(t,(o,a)=>o?o.code==="ENOENT"?r(null,{srcStat:i,destStat:null}):r(o):r(null,{srcStat:i,destStat:a}))})}function Fg(e,t){let r,n;St()?r=ne.statSync(e,{bigint:!0}):r=ne.statSync(e);try{St()?n=ne.statSync(t,{bigint:!0}):n=ne.statSync(t)}catch(i){if(i.code==="ENOENT")return{srcStat:r,destStat:null};throw i}return{srcStat:r,destStat:n}}function kg(e,t,r,n){Cg(e,t,(i,o)=>{if(i)return n(i);let{srcStat:a,destStat:s}=o;return s&&s.ino&&s.dev&&s.ino===a.ino&&s.dev===a.dev?n(new Error("Source and destination must not be the same.")):a.isDirectory()&&wi(e,t)?n(new Error(wt(e,t,r))):n(null,{srcStat:a,destStat:s})})}function jg(e,t,r){let{srcStat:n,destStat:i}=Fg(e,t);if(i&&i.ino&&i.dev&&i.ino===n.ino&&i.dev===n.dev)throw new Error("Source and destination must not be the same.");if(n.isDirectory()&&wi(e,t))throw new Error(wt(e,t,r));return{srcStat:n,destStat:i}}function vi(e,t,r,n,i){let o=Q.resolve(Q.dirname(e)),a=Q.resolve(Q.dirname(r));if(a===o||a===Q.parse(a).root)return i();St()?ne.stat(a,{bigint:!0},(s,u)=>s?s.code==="ENOENT"?i():i(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(wt(e,r,n))):vi(e,t,a,n,i)):ne.stat(a,(s,u)=>s?s.code==="ENOENT"?i():i(s):u.ino&&u.dev&&u.ino===t.ino&&u.dev===t.dev?i(new Error(wt(e,r,n))):vi(e,t,a,n,i))}function su(e,t,r,n){let i=Q.resolve(Q.dirname(e)),o=Q.resolve(Q.dirname(r));if(o===i||o===Q.parse(o).root)return;let a;try{St()?a=ne.statSync(o,{bigint:!0}):a=ne.statSync(o)}catch(s){if(s.code==="ENOENT")return;throw s}if(a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev)throw new Error(wt(e,r,n));return su(e,t,o,n)}function wi(e,t){let r=Q.resolve(e).split(Q.sep).filter(i=>i),n=Q.resolve(t).split(Q.sep).filter(i=>i);return r.reduce((i,o,a)=>i&&n[a]===o,!0)}function wt(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}au.exports={checkPaths:kg,checkPathsSync:jg,checkParentPaths:vi,checkParentPathsSync:su,isSrcSubdir:wi}});var cu=m((tE,uu)=>{"use strict";uu.exports=function(e){if(typeof Buffer.allocUnsafe=="function")try{return Buffer.allocUnsafe(e)}catch{return new Buffer(e)}return new Buffer(e)}});var pu=m((rE,yu)=>{"use strict";var C=$(),Et=require("path"),Mg=ee().mkdirsSync,$g=gi().utimesMillisSync,Ot=bt();function Bg(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`);let{srcStat:n,destStat:i}=Ot.checkPathsSync(e,t,"copy");return Ot.checkParentPathsSync(e,n,t,"copy"),Hg(i,e,t,r)}function Hg(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=Et.dirname(r);return C.existsSync(i)||Mg(i),fu(e,t,r,n)}function fu(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return Gg(e,t,r,n)}function Gg(e,t,r,n){let o=(n.dereference?C.statSync:C.lstatSync)(t);if(o.isDirectory())return Vg(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Ug(o,e,t,r,n);if(o.isSymbolicLink())return Yg(e,t,r,n)}function Ug(e,t,r,n,i){return t?Wg(e,r,n,i):lu(e,r,n,i)}function Wg(e,t,r,n){if(n.overwrite)return C.unlinkSync(r),lu(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function lu(e,t,r,n){return typeof C.copyFileSync=="function"?(C.copyFileSync(t,r),C.chmodSync(r,e.mode),n.preserveTimestamps?$g(r,e.atime,e.mtime):void 0):zg(e,t,r,n)}function zg(e,t,r,n){let o=cu()(65536),a=C.openSync(t,"r"),s=C.openSync(r,"w",e.mode),u=0;for(;u<e.size;){let c=C.readSync(a,o,0,65536,u);C.writeSync(s,o,0,c),u+=c}n.preserveTimestamps&&C.futimesSync(s,e.atime,e.mtime),C.closeSync(a),C.closeSync(s)}function Vg(e,t,r,n,i){if(!t)return Jg(e,r,n,i);if(t&&!t.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`);return du(r,n,i)}function Jg(e,t,r,n){return C.mkdirSync(r),du(t,r,n),C.chmodSync(r,e.mode)}function du(e,t,r){C.readdirSync(e).forEach(n=>Kg(n,e,t,r))}function Kg(e,t,r,n){let i=Et.join(t,e),o=Et.join(r,e),{destStat:a}=Ot.checkPathsSync(i,o,"copy");return fu(a,i,o,n)}function Yg(e,t,r,n){let i=C.readlinkSync(t);if(n.dereference&&(i=Et.resolve(process.cwd(),i)),e){let o;try{o=C.readlinkSync(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return C.symlinkSync(i,r);throw a}if(n.dereference&&(o=Et.resolve(process.cwd(),o)),Ot.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(C.statSync(r).isDirectory()&&Ot.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Qg(i,r)}else return C.symlinkSync(i,r)}function Qg(e,t){return C.unlinkSync(t),C.symlinkSync(e,t)}yu.exports=Bg});var bi=m((nE,mu)=>{"use strict";mu.exports={copySync:pu()}});var me=m((iE,gu)=>{"use strict";var Xg=Y().fromPromise,hu=ui();function Zg(e){return hu.access(e).then(()=>!0).catch(()=>!1)}gu.exports={pathExists:Xg(Zg),pathExistsSync:hu.existsSync}});var Pu=m((oE,xu)=>{"use strict";var W=$(),_t=require("path"),ev=ee().mkdirs,tv=me().pathExists,rv=gi().utimesMillis,xt=bt();function nv(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;

    see https://github.com/jprichardson/node-fs-extra/issues/269`),xt.checkPaths(e,t,"copy",(i,o)=>{if(i)return n(i);let{srcStat:a,destStat:s}=o;xt.checkParentPaths(e,a,t,"copy",u=>u?n(u):r.filter?wu(vu,s,e,t,r,n):vu(s,e,t,r,n))})}function vu(e,t,r,n,i){let o=_t.dirname(r);tv(o,(a,s)=>{if(a)return i(a);if(s)return Ei(e,t,r,n,i);ev(o,u=>u?i(u):Ei(e,t,r,n,i))})}function wu(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(a=>a?e(t,r,n,i,o):o(),a=>o(a))}function Ei(e,t,r,n,i){return n.filter?wu(Su,e,t,r,n,i):Su(e,t,r,n,i)}function Su(e,t,r,n,i){(n.dereference?W.stat:W.lstat)(t,(a,s)=>{if(a)return i(a);if(s.isDirectory())return av(s,e,t,r,n,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return iv(s,e,t,r,n,i);if(s.isSymbolicLink())return fv(e,t,r,n,i)})}function iv(e,t,r,n,i,o){return t?ov(e,r,n,i,o):bu(e,r,n,i,o)}function ov(e,t,r,n,i){if(n.overwrite)W.unlink(r,o=>o?i(o):bu(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function bu(e,t,r,n,i){return typeof W.copyFile=="function"?W.copyFile(t,r,o=>o?i(o):Eu(e,r,n,i)):sv(e,t,r,n,i)}function sv(e,t,r,n,i){let o=W.createReadStream(t);o.on("error",a=>i(a)).once("open",()=>{let a=W.createWriteStream(r,{mode:e.mode});a.on("error",s=>i(s)).on("open",()=>o.pipe(a)).once("close",()=>Eu(e,r,n,i))})}function Eu(e,t,r,n){W.chmod(t,e.mode,i=>i?n(i):r.preserveTimestamps?rv(t,e.atime,e.mtime,n):n())}function av(e,t,r,n,i,o){return t?t&&!t.isDirectory()?o(new Error(`Cannot overwrite non-directory '${n}' with directory '${r}'.`)):Ou(r,n,i,o):uv(e,r,n,i,o)}function uv(e,t,r,n,i){W.mkdir(r,o=>{if(o)return i(o);Ou(t,r,n,a=>a?i(a):W.chmod(r,e.mode,i))})}function Ou(e,t,r,n){W.readdir(e,(i,o)=>i?n(i):_u(o,e,t,r,n))}function _u(e,t,r,n,i){let o=e.pop();return o?cv(e,o,t,r,n,i):i()}function cv(e,t,r,n,i,o){let a=_t.join(r,t),s=_t.join(n,t);xt.checkPaths(a,s,"copy",(u,c)=>{if(u)return o(u);let{destStat:f}=c;Ei(f,a,s,i,l=>l?o(l):_u(e,r,n,i,o))})}function fv(e,t,r,n,i){W.readlink(t,(o,a)=>{if(o)return i(o);if(n.dereference&&(a=_t.resolve(process.cwd(),a)),e)W.readlink(r,(s,u)=>s?s.code==="EINVAL"||s.code==="UNKNOWN"?W.symlink(a,r,i):i(s):(n.dereference&&(u=_t.resolve(process.cwd(),u)),xt.isSrcSubdir(a,u)?i(new Error(`Cannot copy '${a}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&xt.isSrcSubdir(u,a)?i(new Error(`Cannot overwrite '${u}' with '${a}'.`)):lv(a,r,i)));else return W.symlink(a,r,i)})}function lv(e,t,r){W.unlink(t,n=>n?r(n):W.symlink(e,t,r))}xu.exports=nv});var Oi=m((sE,Ru)=>{"use strict";var dv=Y().fromCallback;Ru.exports={copy:dv(Pu())}});var Fu=m((aE,Cu)=>{"use strict";var Iu=$(),Lu=require("path"),x=require("assert"),Pt=process.platform==="win32";function Nu(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Iu[r],r=r+"Sync",e[r]=e[r]||Iu[r]}),e.maxBusyTries=e.maxBusyTries||3}function _i(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),x(e,"rimraf: missing path"),x.strictEqual(typeof e,"string","rimraf: path should be a string"),x.strictEqual(typeof r,"function","rimraf: callback function required"),x(t,"rimraf: invalid options argument provided"),x.strictEqual(typeof t,"object","rimraf: options should be object"),Nu(t),Tu(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let a=n*100;return setTimeout(()=>Tu(e,t,i),a)}o.code==="ENOENT"&&(o=null)}r(o)})}function Tu(e,t,r){x(e),x(t),x(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&Pt)return Au(e,t,n,r);if(i&&i.isDirectory())return Ar(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return Pt?Au(e,t,o,r):Ar(e,t,o,r);if(o.code==="EISDIR")return Ar(e,t,o,r)}return r(o)})})}function Au(e,t,r,n){x(e),x(t),x(typeof n=="function"),r&&x(r instanceof Error),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,a)=>{o?n(o.code==="ENOENT"?null:r):a.isDirectory()?Ar(e,t,r,n):t.unlink(e,n)})})}function qu(e,t,r){let n;x(e),x(t),r&&x(r instanceof Error);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?qr(e,t,r):t.unlinkSync(e)}function Ar(e,t,r,n){x(e),x(t),r&&x(r instanceof Error),x(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?yv(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function yv(e,t,r){x(e),x(t),x(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,a;if(o===0)return t.rmdir(e,r);i.forEach(s=>{_i(Lu.join(e,s),t,u=>{if(!a){if(u)return r(a=u);--o===0&&t.rmdir(e,r)}})})})}function Du(e,t){let r;t=t||{},Nu(t),x(e,"rimraf: missing path"),x.strictEqual(typeof e,"string","rimraf: path should be a string"),x(t,"rimraf: missing options"),x.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&Pt&&qu(e,t,n)}try{r&&r.isDirectory()?qr(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return Pt?qu(e,t,n):qr(e,t,n);if(n.code!=="EISDIR")throw n;qr(e,t,n)}}function qr(e,t,r){x(e),x(t),r&&x(r instanceof Error);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")pv(e,t);else if(n.code!=="ENOENT")throw n}}function pv(e,t){if(x(e),x(t),t.readdirSync(e).forEach(r=>Du(Lu.join(e,r),t)),Pt){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Cu.exports=_i;_i.sync=Du});var Rt=m((uE,ju)=>{"use strict";var mv=Y().fromCallback,ku=Fu();ju.exports={remove:mv(ku),removeSync:ku.sync}});var zu=m((cE,Wu)=>{"use strict";var hv=Y().fromCallback,Bu=$(),Hu=require("path"),Gu=ee(),Uu=Rt(),Mu=hv(function(t,r){r=r||function(){},Bu.readdir(t,(n,i)=>{if(n)return Gu.mkdirs(t,r);i=i.map(a=>Hu.join(t,a)),o();function o(){let a=i.pop();if(!a)return r();Uu.remove(a,s=>{if(s)return r(s);o()})}})});function $u(e){let t;try{t=Bu.readdirSync(e)}catch{return Gu.mkdirsSync(e)}t.forEach(r=>{r=Hu.join(e,r),Uu.removeSync(r)})}Wu.exports={emptyDirSync:$u,emptydirSync:$u,emptyDir:Mu,emptydir:Mu}});var Yu=m((fE,Ku)=>{"use strict";var gv=Y().fromCallback,Vu=require("path"),It=$(),Ju=ee(),vv=me().pathExists;function Sv(e,t){function r(){It.writeFile(e,"",n=>{if(n)return t(n);t()})}It.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Vu.dirname(e);vv(o,(a,s)=>{if(a)return t(a);if(s)return r();Ju.mkdirs(o,u=>{if(u)return t(u);r()})})})}function wv(e){let t;try{t=It.statSync(e)}catch{}if(t&&t.isFile())return;let r=Vu.dirname(e);It.existsSync(r)||Ju.mkdirsSync(r),It.writeFileSync(e,"")}Ku.exports={createFile:gv(Sv),createFileSync:wv}});var tc=m((lE,ec)=>{"use strict";var bv=Y().fromCallback,Xu=require("path"),Me=$(),Zu=ee(),Qu=me().pathExists;function Ev(e,t,r){function n(i,o){Me.link(i,o,a=>{if(a)return r(a);r(null)})}Qu(t,(i,o)=>{if(i)return r(i);if(o)return r(null);Me.lstat(e,a=>{if(a)return a.message=a.message.replace("lstat","ensureLink"),r(a);let s=Xu.dirname(t);Qu(s,(u,c)=>{if(u)return r(u);if(c)return n(e,t);Zu.mkdirs(s,f=>{if(f)return r(f);n(e,t)})})})})}function Ov(e,t){if(Me.existsSync(t))return;try{Me.lstatSync(e)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Xu.dirname(t);return Me.existsSync(n)||Zu.mkdirsSync(n),Me.linkSync(e,t)}ec.exports={createLink:bv(Ev),createLinkSync:Ov}});var nc=m((dE,rc)=>{"use strict";var Oe=require("path"),Tt=$(),_v=me().pathExists;function xv(e,t,r){if(Oe.isAbsolute(e))return Tt.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=Oe.dirname(t),i=Oe.join(n,e);return _v(i,(o,a)=>o?r(o):a?r(null,{toCwd:i,toDst:e}):Tt.lstat(e,s=>s?(s.message=s.message.replace("lstat","ensureSymlink"),r(s)):r(null,{toCwd:e,toDst:Oe.relative(n,e)})))}}function Pv(e,t){let r;if(Oe.isAbsolute(e)){if(r=Tt.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=Oe.dirname(t),i=Oe.join(n,e);if(r=Tt.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Tt.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:Oe.relative(n,e)}}}rc.exports={symlinkPaths:xv,symlinkPathsSync:Pv}});var sc=m((yE,oc)=>{"use strict";var ic=$();function Rv(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);ic.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function Iv(e,t){let r;if(t)return t;try{r=ic.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}oc.exports={symlinkType:Rv,symlinkTypeSync:Iv}});var yc=m((pE,dc)=>{"use strict";var Tv=Y().fromCallback,uc=require("path"),Ve=$(),cc=ee(),Av=cc.mkdirs,qv=cc.mkdirsSync,fc=nc(),Lv=fc.symlinkPaths,Nv=fc.symlinkPathsSync,lc=sc(),Dv=lc.symlinkType,Cv=lc.symlinkTypeSync,ac=me().pathExists;function Fv(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,ac(t,(i,o)=>{if(i)return n(i);if(o)return n(null);Lv(e,t,(a,s)=>{if(a)return n(a);e=s.toDst,Dv(s.toCwd,r,(u,c)=>{if(u)return n(u);let f=uc.dirname(t);ac(f,(l,d)=>{if(l)return n(l);if(d)return Ve.symlink(e,t,c,n);Av(f,y=>{if(y)return n(y);Ve.symlink(e,t,c,n)})})})})})}function kv(e,t,r){if(Ve.existsSync(t))return;let i=Nv(e,t);e=i.toDst,r=Cv(i.toCwd,r);let o=uc.dirname(t);return Ve.existsSync(o)||qv(o),Ve.symlinkSync(e,t,r)}dc.exports={createSymlink:Tv(Fv),createSymlinkSync:kv}});var mc=m((mE,pc)=>{"use strict";var Lr=Yu(),Nr=tc(),Dr=yc();pc.exports={createFile:Lr.createFile,createFileSync:Lr.createFileSync,ensureFile:Lr.createFile,ensureFileSync:Lr.createFileSync,createLink:Nr.createLink,createLinkSync:Nr.createLinkSync,ensureLink:Nr.createLink,ensureLinkSync:Nr.createLinkSync,createSymlink:Dr.createSymlink,createSymlinkSync:Dr.createSymlinkSync,ensureSymlink:Dr.createSymlink,ensureSymlinkSync:Dr.createSymlinkSync}});var Sc=m((hE,vc)=>{var Je;try{Je=$()}catch{Je=require("fs")}function jv(e,t,r){r==null&&(r=t,t={}),typeof t=="string"&&(t={encoding:t}),t=t||{};var n=t.fs||Je,i=!0;"throws"in t&&(i=t.throws),n.readFile(e,t,function(o,a){if(o)return r(o);a=gc(a);var s;try{s=JSON.parse(a,t?t.reviver:null)}catch(u){return i?(u.message=e+": "+u.message,r(u)):r(null,null)}r(null,s)})}function Mv(e,t){t=t||{},typeof t=="string"&&(t={encoding:t});var r=t.fs||Je,n=!0;"throws"in t&&(n=t.throws);try{var i=r.readFileSync(e,t);return i=gc(i),JSON.parse(i,t.reviver)}catch(o){if(n)throw o.message=e+": "+o.message,o;return null}}function hc(e,t){var r,n=`
`;typeof t=="object"&&t!==null&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL));var i=JSON.stringify(e,t?t.replacer:null,r);return i.replace(/\n/g,n)+n}function $v(e,t,r,n){n==null&&(n=r,r={}),r=r||{};var i=r.fs||Je,o="";try{o=hc(t,r)}catch(a){n&&n(a,null);return}i.writeFile(e,o,r,n)}function Bv(e,t,r){r=r||{};var n=r.fs||Je,i=hc(t,r);return n.writeFileSync(e,i,r)}function gc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e=e.replace(/^\uFEFF/,""),e}var Hv={readFile:jv,readFileSync:Mv,writeFile:$v,writeFileSync:Bv};vc.exports=Hv});var Fr=m((gE,bc)=>{"use strict";var wc=Y().fromCallback,Cr=Sc();bc.exports={readJson:wc(Cr.readFile),readJsonSync:Cr.readFileSync,writeJson:wc(Cr.writeFile),writeJsonSync:Cr.writeFileSync}});var _c=m((vE,Oc)=>{"use strict";var Gv=require("path"),Uv=ee(),Wv=me().pathExists,Ec=Fr();function zv(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=Gv.dirname(e);Wv(i,(o,a)=>{if(o)return n(o);if(a)return Ec.writeJson(e,t,r,n);Uv.mkdirs(i,s=>{if(s)return n(s);Ec.writeJson(e,t,r,n)})})}Oc.exports=zv});var Pc=m((SE,xc)=>{"use strict";var Vv=$(),Jv=require("path"),Kv=ee(),Yv=Fr();function Qv(e,t,r){let n=Jv.dirname(e);Vv.existsSync(n)||Kv.mkdirsSync(n),Yv.writeJsonSync(e,t,r)}xc.exports=Qv});var Ic=m((wE,Rc)=>{"use strict";var Xv=Y().fromCallback,K=Fr();K.outputJson=Xv(_c());K.outputJsonSync=Pc();K.outputJSON=K.outputJson;K.outputJSONSync=K.outputJsonSync;K.writeJSON=K.writeJson;K.writeJSONSync=K.writeJsonSync;K.readJSON=K.readJson;K.readJSONSync=K.readJsonSync;Rc.exports=K});var Dc=m((bE,Nc)=>{"use strict";var qc=$(),Zv=require("path"),e0=bi().copySync,Lc=Rt().removeSync,t0=ee().mkdirpSync,Tc=bt();function r0(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i}=Tc.checkPathsSync(e,t,"move");return Tc.checkParentPathsSync(e,i,t,"move"),t0(Zv.dirname(t)),n0(e,t,n)}function n0(e,t,r){if(r)return Lc(t),Ac(e,t,r);if(qc.existsSync(t))throw new Error("dest already exists.");return Ac(e,t,r)}function Ac(e,t,r){try{qc.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return i0(e,t,r)}}function i0(e,t,r){return e0(e,t,{overwrite:r,errorOnExist:!0}),Lc(e)}Nc.exports=r0});var Fc=m((EE,Cc)=>{"use strict";Cc.exports={moveSync:Dc()}});var Bc=m((OE,$c)=>{"use strict";var o0=$(),s0=require("path"),a0=Oi().copy,Mc=Rt().remove,u0=ee().mkdirp,c0=me().pathExists,kc=bt();function f0(e,t,r,n){typeof r=="function"&&(n=r,r={});let i=r.overwrite||r.clobber||!1;kc.checkPaths(e,t,"move",(o,a)=>{if(o)return n(o);let{srcStat:s}=a;kc.checkParentPaths(e,s,t,"move",u=>{if(u)return n(u);u0(s0.dirname(t),c=>c?n(c):l0(e,t,i,n))})})}function l0(e,t,r,n){if(r)return Mc(t,i=>i?n(i):jc(e,t,r,n));c0(t,(i,o)=>i?n(i):o?n(new Error("dest already exists.")):jc(e,t,r,n))}function jc(e,t,r,n){o0.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):d0(e,t,r,n):n())}function d0(e,t,r,n){a0(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):Mc(e,n))}$c.exports=f0});var Gc=m((_E,Hc)=>{"use strict";var y0=Y().fromCallback;Hc.exports={move:y0(Bc())}});var Vc=m((xE,zc)=>{"use strict";var p0=Y().fromCallback,At=$(),Uc=require("path"),Wc=ee(),m0=me().pathExists;function h0(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Uc.dirname(e);m0(i,(o,a)=>{if(o)return n(o);if(a)return At.writeFile(e,t,r,n);Wc.mkdirs(i,s=>{if(s)return n(s);At.writeFile(e,t,r,n)})})}function g0(e,...t){let r=Uc.dirname(e);if(At.existsSync(r))return At.writeFileSync(e,...t);Wc.mkdirsSync(r),At.writeFileSync(e,...t)}zc.exports={outputFile:p0(h0),outputFileSync:g0}});var Kc=m((PE,xi)=>{"use strict";xi.exports=Object.assign({},ui(),bi(),Oi(),zu(),mc(),Ic(),ee(),Fc(),Gc(),Vc(),me(),Rt());var Jc=require("fs");Object.getOwnPropertyDescriptor(Jc,"promises")&&Object.defineProperty(xi.exports,"promises",{get(){return Jc.promises}})});function Yc(e){return(0,Ke.join)("__backends__",`${e}.js`)}var Ke,kr,RE,IE,TE,AE,Qc=j(()=>{"use strict";Ke=require("path"),kr=".edgio",RE=(0,Ke.join)(kr,"lambda"),IE=(0,Ke.join)(kr,"s3"),TE=(0,Ke.join)(kr,"s3-permanent"),AE=(0,Ke.join)(kr,"src")});var Zc=m((LE,Xc)=>{"use strict";Xc.exports=e=>{let t=/^\\\\\?\\/.test(e),r=/[^\u0000-\u0080]+/.test(e);return t||r?e:e.replace(/\\/g,"/")}});function ue(modulePath,{ignoreErrors=!1}={}){try{return eval("require")((0,ef.default)(modulePath))}catch(e){if(ignoreErrors)return;throw e}}var ef,Ye=j(()=>{"use strict";ef=Te(Zc())});function tf(e){return mt()?S0().runAndReturn(e):(global.__edgio_timings__=new Ri,e())}function S0(){let e=ue("cls-hooked");return Pi||(Pi=e.createNamespace(v0)),Pi}var v0,Pi,Ri,rf=j(()=>{"use strict";ht();Ye();v0="edgio";Ri=class{constructor(){this.values={}}get(t){return this.values[t]}set(t,r){this.values[t]=r}}});function nf(e){return(...t)=>tf(()=>e(...t))}var of=j(()=>{"use strict";ae();rf()});function Ii(e){return typeof e=="string"&&(e=ue(e)),e.default&&(e=e.default),typeof e=="function"&&(e=e()),e}var sf=j(()=>{"use strict";Ye()});var uf=m((GE,af)=>{"use strict";af.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;t[r]=i;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var o=Object.getOwnPropertySymbols(t);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var lf=m((UE,ff)=>{"use strict";var cf=typeof Symbol<"u"&&Symbol,w0=uf();ff.exports=function(){return typeof cf!="function"||typeof Symbol!="function"||typeof cf("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:w0()}});var yf=m((WE,df)=>{"use strict";var b0="Function.prototype.bind called on incompatible ",Ti=Array.prototype.slice,E0=Object.prototype.toString,O0="[object Function]";df.exports=function(t){var r=this;if(typeof r!="function"||E0.call(r)!==O0)throw new TypeError(b0+r);for(var n=Ti.call(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,n.concat(Ti.call(arguments)));return Object(f)===f?f:this}else return r.apply(t,n.concat(Ti.call(arguments)))},a=Math.max(0,r.length-n.length),s=[],u=0;u<a;u++)s.push("$"+u);if(i=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var c=function(){};c.prototype=r.prototype,i.prototype=new c,c.prototype=null}return i}});var jr=m((zE,pf)=>{"use strict";var _0=yf();pf.exports=Function.prototype.bind||_0});var hf=m((VE,mf)=>{"use strict";var x0=jr();mf.exports=x0.call(Function.call,Object.prototype.hasOwnProperty)});var Br=m((JE,wf)=>{"use strict";var O,tt=SyntaxError,Sf=Function,Ze=TypeError,Ai=function(e){try{return Sf('"use strict"; return ('+e+").constructor;")()}catch{}},$e=Object.getOwnPropertyDescriptor;if($e)try{$e({},"")}catch{$e=null}var qi=function(){throw new Ze},P0=$e?function(){try{return arguments.callee,qi}catch{try{return $e(arguments,"callee").get}catch{return qi}}}():qi,Qe=lf()(),_e=Object.getPrototypeOf||function(e){return e.__proto__},Xe={},R0=typeof Uint8Array>"u"?O:_e(Uint8Array),et={"%AggregateError%":typeof AggregateError>"u"?O:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?O:ArrayBuffer,"%ArrayIteratorPrototype%":Qe?_e([][Symbol.iterator]()):O,"%AsyncFromSyncIteratorPrototype%":O,"%AsyncFunction%":Xe,"%AsyncGenerator%":Xe,"%AsyncGeneratorFunction%":Xe,"%AsyncIteratorPrototype%":Xe,"%Atomics%":typeof Atomics>"u"?O:Atomics,"%BigInt%":typeof BigInt>"u"?O:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?O:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?O:Float32Array,"%Float64Array%":typeof Float64Array>"u"?O:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?O:FinalizationRegistry,"%Function%":Sf,"%GeneratorFunction%":Xe,"%Int8Array%":typeof Int8Array>"u"?O:Int8Array,"%Int16Array%":typeof Int16Array>"u"?O:Int16Array,"%Int32Array%":typeof Int32Array>"u"?O:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Qe?_e(_e([][Symbol.iterator]())):O,"%JSON%":typeof JSON=="object"?JSON:O,"%Map%":typeof Map>"u"?O:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Qe?O:_e(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?O:Promise,"%Proxy%":typeof Proxy>"u"?O:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?O:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?O:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Qe?O:_e(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?O:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Qe?_e(""[Symbol.iterator]()):O,"%Symbol%":Qe?Symbol:O,"%SyntaxError%":tt,"%ThrowTypeError%":P0,"%TypedArray%":R0,"%TypeError%":Ze,"%Uint8Array%":typeof Uint8Array>"u"?O:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?O:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?O:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?O:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?O:WeakMap,"%WeakRef%":typeof WeakRef>"u"?O:WeakRef,"%WeakSet%":typeof WeakSet>"u"?O:WeakSet},I0=function e(t){var r;if(t==="%AsyncFunction%")r=Ai("async function () {}");else if(t==="%GeneratorFunction%")r=Ai("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=Ai("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var i=e("%AsyncGenerator%");i&&(r=_e(i.prototype))}return et[t]=r,r},gf={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},qt=jr(),Mr=hf(),T0=qt.call(Function.call,Array.prototype.concat),A0=qt.call(Function.apply,Array.prototype.splice),vf=qt.call(Function.call,String.prototype.replace),$r=qt.call(Function.call,String.prototype.slice),q0=qt.call(Function.call,RegExp.prototype.exec),L0=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,N0=/\\(\\)?/g,D0=function(t){var r=$r(t,0,1),n=$r(t,-1);if(r==="%"&&n!=="%")throw new tt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new tt("invalid intrinsic syntax, expected opening `%`");var i=[];return vf(t,L0,function(o,a,s,u){i[i.length]=s?vf(u,N0,"$1"):a||o}),i},C0=function(t,r){var n=t,i;if(Mr(gf,n)&&(i=gf[n],n="%"+i[0]+"%"),Mr(et,n)){var o=et[n];if(o===Xe&&(o=I0(n)),typeof o>"u"&&!r)throw new Ze("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new tt("intrinsic "+t+" does not exist!")};wf.exports=function(t,r){if(typeof t!="string"||t.length===0)throw new Ze("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new Ze('"allowMissing" argument must be a boolean');if(q0(/^%?[^%]*%?$/g,t)===null)throw new tt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=D0(t),i=n.length>0?n[0]:"",o=C0("%"+i+"%",r),a=o.name,s=o.value,u=!1,c=o.alias;c&&(i=c[0],A0(n,T0([0,1],c)));for(var f=1,l=!0;f<n.length;f+=1){var d=n[f],y=$r(d,0,1),p=$r(d,-1);if((y==='"'||y==="'"||y==="`"||p==='"'||p==="'"||p==="`")&&y!==p)throw new tt("property names with quotes must have matching quotes");if((d==="constructor"||!l)&&(u=!0),i+="."+d,a="%"+i+"%",Mr(et,a))s=et[a];else if(s!=null){if(!(d in s)){if(!r)throw new Ze("base intrinsic for "+t+" exists, but the property is not available.");return}if($e&&f+1>=n.length){var h=$e(s,d);l=!!h,l&&"get"in h&&!("originalValue"in h.get)?s=h.get:s=s[d]}else l=Mr(s,d),s=s[d];l&&!u&&(et[a]=s)}}return s}});var Pf=m((KE,Hr)=>{"use strict";var Li=jr(),rt=Br(),Of=rt("%Function.prototype.apply%"),_f=rt("%Function.prototype.call%"),xf=rt("%Reflect.apply%",!0)||Li.call(_f,Of),bf=rt("%Object.getOwnPropertyDescriptor%",!0),Be=rt("%Object.defineProperty%",!0),F0=rt("%Math.max%");if(Be)try{Be({},"a",{value:1})}catch{Be=null}Hr.exports=function(t){var r=xf(Li,_f,arguments);if(bf&&Be){var n=bf(r,"length");n.configurable&&Be(r,"length",{value:1+F0(0,t.length-(arguments.length-1))})}return r};var Ef=function(){return xf(Li,Of,arguments)};Be?Be(Hr.exports,"apply",{value:Ef}):Hr.exports.apply=Ef});var Af=m((YE,Tf)=>{"use strict";var Rf=Br(),If=Pf(),k0=If(Rf("String.prototype.indexOf"));Tf.exports=function(t,r){var n=Rf(t,!!r);return typeof n=="function"&&k0(t,".prototype.")>-1?If(n):n}});var Lf=m((QE,qf)=>{qf.exports=require("util").inspect});var Yf=m((XE,Kf)=>{var Hi=typeof Map=="function"&&Map.prototype,Ni=Object.getOwnPropertyDescriptor&&Hi?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Ur=Hi&&Ni&&typeof Ni.get=="function"?Ni.get:null,j0=Hi&&Map.prototype.forEach,Gi=typeof Set=="function"&&Set.prototype,Di=Object.getOwnPropertyDescriptor&&Gi?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Wr=Gi&&Di&&typeof Di.get=="function"?Di.get:null,M0=Gi&&Set.prototype.forEach,$0=typeof WeakMap=="function"&&WeakMap.prototype,Nt=$0?WeakMap.prototype.has:null,B0=typeof WeakSet=="function"&&WeakSet.prototype,Dt=B0?WeakSet.prototype.has:null,H0=typeof WeakRef=="function"&&WeakRef.prototype,Nf=H0?WeakRef.prototype.deref:null,G0=Boolean.prototype.valueOf,U0=Object.prototype.toString,W0=Function.prototype.toString,z0=String.prototype.match,Ui=String.prototype.slice,Pe=String.prototype.replace,V0=String.prototype.toUpperCase,Df=String.prototype.toLowerCase,Gf=RegExp.prototype.test,Cf=Array.prototype.concat,he=Array.prototype.join,J0=Array.prototype.slice,Ff=Math.floor,ki=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ci=Object.getOwnPropertySymbols,ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,nt=typeof Symbol=="function"&&typeof Symbol.iterator=="object",J=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===nt?"object":"symbol")?Symbol.toStringTag:null,Uf=Object.prototype.propertyIsEnumerable,kf=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function jf(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||Gf.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var n=e<0?-Ff(-e):Ff(e);if(n!==e){var i=String(n),o=Ui.call(t,i.length+1);return Pe.call(i,r,"$&_")+"."+Pe.call(Pe.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Pe.call(t,r,"$&_")}var Mi=Lf(),Mf=Mi.custom,$f=zf(Mf)?Mf:null;Kf.exports=function e(t,r,n,i){var o=r||{};if(xe(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(xe(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=xe(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(xe(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(xe(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return Jf(t,o);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?jf(t,u):u}if(typeof t=="bigint"){var c=String(t)+"n";return s?jf(t,c):c}var f=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof t=="object")return $i(t)?"[Array]":"[Object]";var l=dS(o,n);if(typeof i>"u")i=[];else if(Vf(i,t)>=0)return"[Circular]";function d(P,T,_){if(T&&(i=J0.call(i),i.push(T)),_){var A={depth:o.depth};return xe(o,"quoteStyle")&&(A.quoteStyle=o.quoteStyle),e(P,A,n+1,i)}return e(P,o,n+1,i)}if(typeof t=="function"&&!Bf(t)){var y=nS(t),p=Gr(t,d);return"[Function"+(y?": "+y:" (anonymous)")+"]"+(p.length>0?" { "+he.call(p,", ")+" }":"")}if(zf(t)){var h=nt?Pe.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):ji.call(t);return typeof t=="object"&&!nt?Lt(h):h}if(cS(t)){for(var v="<"+Df.call(String(t.nodeName)),g=t.attributes||[],R=0;R<g.length;R++)v+=" "+g[R].name+"="+Wf(K0(g[R].value),"double",o);return v+=">",t.childNodes&&t.childNodes.length&&(v+="..."),v+="</"+Df.call(String(t.nodeName))+">",v}if($i(t)){if(t.length===0)return"[]";var E=Gr(t,d);return l&&!lS(E)?"["+Bi(E,l)+"]":"[ "+he.call(E,", ")+" ]"}if(Q0(t)){var I=Gr(t,d);return!("cause"in Error.prototype)&&"cause"in t&&!Uf.call(t,"cause")?"{ ["+String(t)+"] "+he.call(Cf.call("[cause]: "+d(t.cause),I),", ")+" }":I.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+he.call(I,", ")+" }"}if(typeof t=="object"&&a){if($f&&typeof t[$f]=="function"&&Mi)return Mi(t,{depth:f-n});if(a!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(iS(t)){var F=[];return j0.call(t,function(P,T){F.push(d(T,t,!0)+" => "+d(P,t))}),Hf("Map",Ur.call(t),F,l)}if(aS(t)){var B=[];return M0.call(t,function(P){B.push(d(P,t))}),Hf("Set",Wr.call(t),B,l)}if(oS(t))return Fi("WeakMap");if(uS(t))return Fi("WeakSet");if(sS(t))return Fi("WeakRef");if(Z0(t))return Lt(d(Number(t)));if(tS(t))return Lt(d(ki.call(t)));if(eS(t))return Lt(G0.call(t));if(X0(t))return Lt(d(String(t)));if(!Y0(t)&&!Bf(t)){var X=Gr(t,d),ie=kf?kf(t)===Object.prototype:t instanceof Object||t.constructor===Object,S=t instanceof Object?"":"null prototype",b=!ie&&J&&Object(t)===t&&J in t?Ui.call(Re(t),8,-1):S?"Object":"",w=ie||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",D=w+(b||S?"["+he.call(Cf.call([],b||[],S||[]),": ")+"] ":"");return X.length===0?D+"{}":l?D+"{"+Bi(X,l)+"}":D+"{ "+he.call(X,", ")+" }"}return String(t)};function Wf(e,t,r){var n=(r.quoteStyle||t)==="double"?'"':"'";return n+e+n}function K0(e){return Pe.call(String(e),/"/g,"&quot;")}function $i(e){return Re(e)==="[object Array]"&&(!J||!(typeof e=="object"&&J in e))}function Y0(e){return Re(e)==="[object Date]"&&(!J||!(typeof e=="object"&&J in e))}function Bf(e){return Re(e)==="[object RegExp]"&&(!J||!(typeof e=="object"&&J in e))}function Q0(e){return Re(e)==="[object Error]"&&(!J||!(typeof e=="object"&&J in e))}function X0(e){return Re(e)==="[object String]"&&(!J||!(typeof e=="object"&&J in e))}function Z0(e){return Re(e)==="[object Number]"&&(!J||!(typeof e=="object"&&J in e))}function eS(e){return Re(e)==="[object Boolean]"&&(!J||!(typeof e=="object"&&J in e))}function zf(e){if(nt)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!ji)return!1;try{return ji.call(e),!0}catch{}return!1}function tS(e){if(!e||typeof e!="object"||!ki)return!1;try{return ki.call(e),!0}catch{}return!1}var rS=Object.prototype.hasOwnProperty||function(e){return e in this};function xe(e,t){return rS.call(e,t)}function Re(e){return U0.call(e)}function nS(e){if(e.name)return e.name;var t=z0.call(W0.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function Vf(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function iS(e){if(!Ur||!e||typeof e!="object")return!1;try{Ur.call(e);try{Wr.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function oS(e){if(!Nt||!e||typeof e!="object")return!1;try{Nt.call(e,Nt);try{Dt.call(e,Dt)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function sS(e){if(!Nf||!e||typeof e!="object")return!1;try{return Nf.call(e),!0}catch{}return!1}function aS(e){if(!Wr||!e||typeof e!="object")return!1;try{Wr.call(e);try{Ur.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function uS(e){if(!Dt||!e||typeof e!="object")return!1;try{Dt.call(e,Dt);try{Nt.call(e,Nt)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function cS(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function Jf(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return Jf(Ui.call(e,0,t.maxStringLength),t)+n}var i=Pe.call(Pe.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,fS);return Wf(i,"single",t)}function fS(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+V0.call(t.toString(16))}function Lt(e){return"Object("+e+")"}function Fi(e){return e+" { ? }"}function Hf(e,t,r,n){var i=n?Bi(r,n):he.call(r,", ");return e+" ("+t+") {"+i+"}"}function lS(e){for(var t=0;t<e.length;t++)if(Vf(e[t],`
`)>=0)return!1;return!0}function dS(e,t){var r;if(e.indent==="	")r="	";else if(typeof e.indent=="number"&&e.indent>0)r=he.call(Array(e.indent+1)," ");else return null;return{base:r,prev:he.call(Array(t+1),r)}}function Bi(e,t){if(e.length===0)return"";var r=`
`+t.prev+t.base;return r+he.call(e,","+r)+`
`+t.prev}function Gr(e,t){var r=$i(e),n=[];if(r){n.length=e.length;for(var i=0;i<e.length;i++)n[i]=xe(e,i)?t(e[i],e):""}var o=typeof Ci=="function"?Ci(e):[],a;if(nt){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var u in e)!xe(e,u)||r&&String(Number(u))===u&&u<e.length||nt&&a["$"+u]instanceof Symbol||(Gf.call(/[^\w$]/,u)?n.push(t(u,e)+": "+t(e[u],e)):n.push(u+": "+t(e[u],e)));if(typeof Ci=="function")for(var c=0;c<o.length;c++)Uf.call(e,o[c])&&n.push("["+t(o[c])+"]: "+t(e[o[c]],e));return n}});var Xf=m((ZE,Qf)=>{"use strict";var Wi=Br(),it=Af(),yS=Yf(),pS=Wi("%TypeError%"),zr=Wi("%WeakMap%",!0),Vr=Wi("%Map%",!0),mS=it("WeakMap.prototype.get",!0),hS=it("WeakMap.prototype.set",!0),gS=it("WeakMap.prototype.has",!0),vS=it("Map.prototype.get",!0),SS=it("Map.prototype.set",!0),wS=it("Map.prototype.has",!0),zi=function(e,t){for(var r=e,n;(n=r.next)!==null;r=n)if(n.key===t)return r.next=n.next,n.next=e.next,e.next=n,n},bS=function(e,t){var r=zi(e,t);return r&&r.value},ES=function(e,t,r){var n=zi(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}},OS=function(e,t){return!!zi(e,t)};Qf.exports=function(){var t,r,n,i={assert:function(o){if(!i.has(o))throw new pS("Side channel does not contain "+yS(o))},get:function(o){if(zr&&o&&(typeof o=="object"||typeof o=="function")){if(t)return mS(t,o)}else if(Vr){if(r)return vS(r,o)}else if(n)return bS(n,o)},has:function(o){if(zr&&o&&(typeof o=="object"||typeof o=="function")){if(t)return gS(t,o)}else if(Vr){if(r)return wS(r,o)}else if(n)return OS(n,o);return!1},set:function(o,a){zr&&o&&(typeof o=="object"||typeof o=="function")?(t||(t=new zr),hS(t,o,a)):Vr?(r||(r=new Vr),SS(r,o,a)):(n||(n={key:{},next:null}),ES(n,o,a))}};return i}});var Jr=m((eO,Zf)=>{"use strict";var _S=String.prototype.replace,xS=/%20/g,Vi={RFC1738:"RFC1738",RFC3986:"RFC3986"};Zf.exports={default:Vi.RFC3986,formatters:{RFC1738:function(e){return _S.call(e,xS,"+")},RFC3986:function(e){return String(e)}},RFC1738:Vi.RFC1738,RFC3986:Vi.RFC3986}});var Ki=m((tO,tl)=>{"use strict";var PS=Jr(),Ji=Object.prototype.hasOwnProperty,He=Array.isArray,ge=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),RS=function(t){for(;t.length>1;){var r=t.pop(),n=r.obj[r.prop];if(He(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},el=function(t,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<t.length;++i)typeof t[i]<"u"&&(n[i]=t[i]);return n},IS=function e(t,r,n){if(!r)return t;if(typeof r!="object"){if(He(t))t.push(r);else if(t&&typeof t=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Ji.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);var i=t;return He(t)&&!He(r)&&(i=el(t,n)),He(t)&&He(r)?(r.forEach(function(o,a){if(Ji.call(t,a)){var s=t[a];s&&typeof s=="object"&&o&&typeof o=="object"?t[a]=e(s,o,n):t.push(o)}else t[a]=o}),t):Object.keys(r).reduce(function(o,a){var s=r[a];return Ji.call(o,a)?o[a]=e(o[a],s,n):o[a]=s,o},i)},TS=function(t,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},t)},AS=function(e,t,r){var n=e.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},qS=function(t,r,n,i,o){if(t.length===0)return t;var a=t;if(typeof t=="symbol"?a=Symbol.prototype.toString.call(t):typeof t!="string"&&(a=String(t)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var s="",u=0;u<a.length;++u){var c=a.charCodeAt(u);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||o===PS.RFC1738&&(c===40||c===41)){s+=a.charAt(u);continue}if(c<128){s=s+ge[c];continue}if(c<2048){s=s+(ge[192|c>>6]+ge[128|c&63]);continue}if(c<55296||c>=57344){s=s+(ge[224|c>>12]+ge[128|c>>6&63]+ge[128|c&63]);continue}u+=1,c=65536+((c&1023)<<10|a.charCodeAt(u)&1023),s+=ge[240|c>>18]+ge[128|c>>12&63]+ge[128|c>>6&63]+ge[128|c&63]}return s},LS=function(t){for(var r=[{obj:{o:t},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],f=a[c];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:a,prop:c}),n.push(f))}return RS(r),t},NS=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},DS=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},CS=function(t,r){return[].concat(t,r)},FS=function(t,r){if(He(t)){for(var n=[],i=0;i<t.length;i+=1)n.push(r(t[i]));return n}return r(t)};tl.exports={arrayToObject:el,assign:TS,combine:CS,compact:LS,decode:AS,encode:qS,isBuffer:DS,isRegExp:NS,maybeMap:FS,merge:IS}});var al=m((rO,sl)=>{"use strict";var il=Xf(),Qi=Ki(),Ct=Jr(),kS=Object.prototype.hasOwnProperty,rl={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,r){return t+"["+r+"]"},repeat:function(t){return t}},be=Array.isArray,jS=String.prototype.split,MS=Array.prototype.push,ol=function(e,t){MS.apply(e,be(t)?t:[t])},$S=Date.prototype.toISOString,nl=Ct.default,z={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Qi.encode,encodeValuesOnly:!1,format:nl,formatter:Ct.formatters[nl],indices:!1,serializeDate:function(t){return $S.call(t)},skipNulls:!1,strictNullHandling:!1},BS=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Yi={},HS=function e(t,r,n,i,o,a,s,u,c,f,l,d,y,p,h,v){for(var g=t,R=v,E=0,I=!1;(R=R.get(Yi))!==void 0&&!I;){var F=R.get(t);if(E+=1,typeof F<"u"){if(F===E)throw new RangeError("Cyclic object value");I=!0}typeof R.get(Yi)>"u"&&(E=0)}if(typeof u=="function"?g=u(r,g):g instanceof Date?g=l(g):n==="comma"&&be(g)&&(g=Qi.maybeMap(g,function(L){return L instanceof Date?l(L):L})),g===null){if(o)return s&&!p?s(r,z.encoder,h,"key",d):r;g=""}if(BS(g)||Qi.isBuffer(g)){if(s){var B=p?r:s(r,z.encoder,h,"key",d);if(n==="comma"&&p){for(var X=jS.call(String(g),","),ie="",S=0;S<X.length;++S)ie+=(S===0?"":",")+y(s(X[S],z.encoder,h,"value",d));return[y(B)+(i&&be(g)&&X.length===1?"[]":"")+"="+ie]}return[y(B)+"="+y(s(g,z.encoder,h,"value",d))]}return[y(r)+"="+y(String(g))]}var b=[];if(typeof g>"u")return b;var w;if(n==="comma"&&be(g))w=[{value:g.length>0?g.join(",")||null:void 0}];else if(be(u))w=u;else{var D=Object.keys(g);w=c?D.sort(c):D}for(var P=i&&be(g)&&g.length===1?r+"[]":r,T=0;T<w.length;++T){var _=w[T],A=typeof _=="object"&&typeof _.value<"u"?_.value:g[_];if(!(a&&A===null)){var q=be(g)?typeof n=="function"?n(P,_):P:P+(f?"."+_:"["+_+"]");v.set(t,E);var M=il();M.set(Yi,v),ol(b,e(A,q,n,i,o,a,s,u,c,f,l,d,y,p,h,M))}}return b},GS=function(t){if(!t)return z;if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=t.charset||z.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Ct.default;if(typeof t.format<"u"){if(!kS.call(Ct.formatters,t.format))throw new TypeError("Unknown format option provided.");n=t.format}var i=Ct.formatters[n],o=z.filter;return(typeof t.filter=="function"||be(t.filter))&&(o=t.filter),{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:z.addQueryPrefix,allowDots:typeof t.allowDots>"u"?z.allowDots:!!t.allowDots,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:z.charsetSentinel,delimiter:typeof t.delimiter>"u"?z.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:z.encode,encoder:typeof t.encoder=="function"?t.encoder:z.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:z.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:z.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:z.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:z.strictNullHandling}};sl.exports=function(e,t){var r=e,n=GS(t),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):be(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof r!="object"||r===null)return"";var s;t&&t.arrayFormat in rl?s=t.arrayFormat:t&&"indices"in t?s=t.indices?"indices":"repeat":s="indices";var u=rl[s];if(t&&"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=u==="comma"&&t&&t.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var f=il(),l=0;l<i.length;++l){var d=i[l];n.skipNulls&&r[d]===null||ol(a,HS(r[d],d,u,c,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}var y=a.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),y.length>0?p+y:""}});var fl=m((nO,cl)=>{"use strict";var ot=Ki(),Xi=Object.prototype.hasOwnProperty,US=Array.isArray,H={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ot.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},WS=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},ul=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},zS="utf8=%26%2310003%3B",VS="utf8=%E2%9C%93",JS=function(t,r){var n={},i=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,o),s=-1,u,c=r.charset;if(r.charsetSentinel)for(u=0;u<a.length;++u)a[u].indexOf("utf8=")===0&&(a[u]===VS?c="utf-8":a[u]===zS&&(c="iso-8859-1"),s=u,u=a.length);for(u=0;u<a.length;++u)if(u!==s){var f=a[u],l=f.indexOf("]="),d=l===-1?f.indexOf("="):l+1,y,p;d===-1?(y=r.decoder(f,H.decoder,c,"key"),p=r.strictNullHandling?null:""):(y=r.decoder(f.slice(0,d),H.decoder,c,"key"),p=ot.maybeMap(ul(f.slice(d+1),r),function(h){return r.decoder(h,H.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=WS(p)),f.indexOf("[]=")>-1&&(p=US(p)?[p]:p),Xi.call(n,y)?n[y]=ot.combine(n[y],p):n[y]=p}return n},KS=function(e,t,r,n){for(var i=n?t:ul(t,r),o=e.length-1;o>=0;--o){var a,s=e[o];if(s==="[]"&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var u=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,c=parseInt(u,10);!r.parseArrays&&u===""?a={0:i}:!isNaN(c)&&s!==u&&String(c)===u&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[],a[c]=i):u!=="__proto__"&&(a[u]=i)}i=a}return i},YS=function(t,r,n,i){if(!!t){var o=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,u=n.depth>0&&a.exec(o),c=u?o.slice(0,u.index):o,f=[];if(c){if(!n.plainObjects&&Xi.call(Object.prototype,c)&&!n.allowPrototypes)return;f.push(c)}for(var l=0;n.depth>0&&(u=s.exec(o))!==null&&l<n.depth;){if(l+=1,!n.plainObjects&&Xi.call(Object.prototype,u[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(u[1])}return u&&f.push("["+o.slice(u.index)+"]"),KS(f,r,n,i)}},QS=function(t){if(!t)return H;if(t.decoder!==null&&t.decoder!==void 0&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof t.charset>"u"?H.charset:t.charset;return{allowDots:typeof t.allowDots>"u"?H.allowDots:!!t.allowDots,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:H.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:H.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:H.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:H.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:H.comma,decoder:typeof t.decoder=="function"?t.decoder:H.decoder,delimiter:typeof t.delimiter=="string"||ot.isRegExp(t.delimiter)?t.delimiter:H.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:H.depth,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:H.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:H.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:H.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:H.strictNullHandling}};cl.exports=function(e,t){var r=QS(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof e=="string"?JS(e,r):e,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],u=YS(s,n[s],r,typeof e=="string");i=ot.merge(i,u,r)}return r.allowSparse===!0?i:ot.compact(i)}});var dl=m((iO,ll)=>{"use strict";var XS=al(),ZS=fl(),ew=Jr();ll.exports={formats:ew,parse:ZS,stringify:XS}});var hl=m(Zi=>{"use strict";var yl=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,tw=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,pl=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,rw=/\\([\u000b\u0020-\u00ff])/g,nw=/([\\"])/g,ml=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;Zi.format=iw;Zi.parse=ow;function iw(e){if(!e||typeof e!="object")throw new TypeError("argument obj is required");var t=e.parameters,r=e.type;if(!r||!ml.test(r))throw new TypeError("invalid type");var n=r;if(t&&typeof t=="object")for(var i,o=Object.keys(t).sort(),a=0;a<o.length;a++){if(i=o[a],!pl.test(i))throw new TypeError("invalid parameter name");n+="; "+i+"="+aw(t[i])}return n}function ow(e){if(!e)throw new TypeError("argument string is required");var t=typeof e=="object"?sw(e):e;if(typeof t!="string")throw new TypeError("argument string is required to be a string");var r=t.indexOf(";"),n=r!==-1?t.substr(0,r).trim():t.trim();if(!ml.test(n))throw new TypeError("invalid media type");var i=new uw(n.toLowerCase());if(r!==-1){var o,a,s;for(yl.lastIndex=r;a=yl.exec(t);){if(a.index!==r)throw new TypeError("invalid parameter format");r+=a[0].length,o=a[1].toLowerCase(),s=a[2],s[0]==='"'&&(s=s.substr(1,s.length-2).replace(rw,"$1")),i.parameters[o]=s}if(r!==t.length)throw new TypeError("invalid parameter format")}return i}function sw(e){var t;if(typeof e.getHeader=="function"?t=e.getHeader("content-type"):typeof e.headers=="object"&&(t=e.headers&&e.headers["content-type"]),typeof t!="string")throw new TypeError("content-type header is missing from object");return t}function aw(e){var t=String(e);if(pl.test(t))return t;if(t.length>0&&!tw.test(t))throw new TypeError("invalid parameter value");return'"'+t.replace(nw,"\\$1")+'"'}function uw(e){this.parameters=Object.create(null),this.type=e}});function Kr(e){return e?typeof e.length=="number"?!e.length:!(typeof e=="object"&&Object.keys(e).length):!0}var gl=j(()=>{"use strict"});function eo(e){return typeof e=="string"}var vl=j(()=>{"use strict"});function Qr(e){var r;let t=(r=e.getHeader(N.contentEncoding))==null?void 0:r.toLowerCase();if(!t)return!0;switch(t){case we:return Buffer.isBuffer(e.body)?(e.body=(0,Yr.gunzipSync)(e.body),e.removeHeader(N.contentEncoding),e.setHeader(N.contentLength,Buffer.byteLength(e.body)),!0):!1;case Se:return Buffer.isBuffer(e.body)?(e.body=(0,Yr.brotliDecompressSync)(e.body),e.removeHeader(N.contentEncoding),e.setHeader(N.contentLength,Buffer.byteLength(e.body)),!0):!1;default:return!1}}var Yr,Sl=j(()=>{"use strict";Yr=require("zlib");ae()});var Xr,wl,cw,fw,bl,El=j(()=>{"use strict";Xr=require("zlib");ae();wl=Te(hl());gl();vl();Sl();cw=new Set(["application/atom_xml","application/javascript","application/json","application/rss+xml","application/vnd.ms-fontobject","application/x-font-opentype","application/x-font-ttf","application/x-javascript","application/xhtml+xml","application/xml","application/xml+rss","font/eot","font/opentype","font/otf","image/svg+xml","image/x-icon","text/css","text/html","text/javascript","text/js","text/plain"]),fw=(e,t,r)=>{let n=t.getHeader(N.contentEncoding);if(Kr(e)){Kr(n)||(Qr(t),r.body=t.body);return}let i=/\bbr\b/,a=/\bgzip\b/.test(e),s=i.test(e);if(a&&n===we||s&&n===Se||!Qr(t))return;let u=t.getHeader(N.contentType);if(u=eo(u)?[u]:u,!u||!cw.has((0,wl.parse)(u[0]).type.toLowerCase()))return;let c;a?c=we:s&&(c=Se);let f;switch(c){case Se:{f=(0,Xr.brotliCompressSync)(Buffer.from(r.body));break}case we:{f=(0,Xr.gzipSync)(Buffer.from(r.body));break}default:return}t.setHeader(N.contentLength,Buffer.byteLength(f)),t.setHeader(N.contentEncoding,c),r.body=f},bl=fw});var Ol=m((mO,lw)=>{lw.exports={name:"@edgio/core",version:"6.1.1",main:"./index.js",license:"UNLICENSED",scripts:{docs:"typedoc",build:"rm -rf ./dist; mkdir ./dist; cp -r package.json README.md serverless.yml default-app ./dist; tsc; npm run bundle-handler;","bundle-handler":"esbuild src/lambda/handler.ts --bundle --minify --platform=node --target=node14.0 --outfile=dist/lambda/handler.js --log-level=error --sourcemap",watch:"npm-watch","ts:watch":"tsc --watch","push-build":"npm run build && cd dist && yalc push --force && cd ..",release:"cd ./dist; npm publish --access public","release:next":"npm run release -- --tag next",test:"jest --watchAll=false --runInBand --forceExit"},dependencies:{"@babel/parser":"^7.18.9","@babel/traverse":"^7.18.9","@types/lodash.clonedeep":"^4.5.6",ajv:"^6.12.6","babel-loader":"^8.2.2",chalk:"^4.1.2",chardet:"^1.4.0",chokidar:"^3.5.1","cls-hooked":"^4.2.2","content-type":"^1.0.4",cookie:"^0.4.1","cross-spawn":"^7.0.3","decode-uri-component":"^0.2.0",deepmerge:"^4.2.2",esbuild:"^0.14.49",express:"^4.17.1","fluentvalidation-ts":"^2.2.2","fs-extra":"^8.1.0",globby:"^11.0.2","http-proxy":"^1.18.1","lodash.clonedeep":"^4.5.0","lru-cache":"^6.0.0","mime-types":"^2.1.35","node-fetch":"^2.6.1","path-to-regexp":"^6.2.0",pino:"^6.13.3",qs:"^6.11.0","resolve-package-path":"^4.0.3",semver:"^7.3.5",shelljs:"^0.8.5",slash:"^3.0.0","tcp-port-used":"^1.0.2","ts-loader":"^8.2.0",unixify:"^1.0.0",uuid:"^8.3.2","workbox-build":"^6.5.4"},publishConfig:{directory:"dist"},watch:{"push-build":{patterns:["src","bin","serverless.yml","default-app","package.json"],extensions:["js","ts"],quiet:!1}},jest:{clearMocks:!0,collectCoverage:!0,transform:{"^.+\\.(js)?$":"babel-jest","^.+\\.ts$":"ts-jest"},moduleFileExtensions:["ts","js","json"],setupFilesAfterEnv:["<rootDir>/test/jest.js"],transformIgnorePatterns:["<rootDir>/node_modules/"],moduleNameMapper:{"../package.json":"<rootDir>/package.json","^@edgio/core(.*)$":"<rootDir>/src/$1"},collectCoverageFrom:["./src/**/*.{ts,js}","!**/mocks/**","!**/test-utils/**","!**/index.ts","!**/src/types.ts","!**/plugins/PluginBase.ts","!**/bin/**/*"]},devDependencies:{"@types/cls-hooked":"^4.3.1","@types/content-type":"^1.1.3","@types/cookie":"^0.3.3","@types/cross-spawn":"^6.0.2","@types/decode-uri-component":"^0.2.0","@types/express":"^4.17.7","@types/fs-extra":"^8.1.1","@types/http-proxy":"^1.17.4","@types/jest":"^26.0.23","@types/lodash":"^4.14.162","@types/lru-cache":"^5.1.0","@types/mime-types":"^2.1.0","@types/node":"^14.6.4","@types/route-parser":"^0.1.3","@types/semver":"^7.3.9","@types/shelljs":"^0.8.8","@types/tcp-port-used":"^1.0.0","@types/unixify":"^1.0.0","@types/uuid":"^8.0.1","@types/webpack-bundle-analyzer":"^3.9.0","@types/workbox-build":"^5.0.1",lodash:"^4.17.21",nock:"^13.2.8",stripe:"^9.12.0",webpack:"^5.27.0","webpack-bundle-analyzer":"^3.9.0","webpack-dev-middleware":"^4.1.0"}}});function dw(){return process.env[ye.versionOverride]||Ol().version}function yw(e){ro(e,N.x0Status,`w=${e.statusCode}`)}function pw(e,t){let r=t.lambda;ro(e,N.x0T,`wt=${t.duration},wc=${r.invocationCounter},wg=${r.age},wl=${r.lifetimeDuration}`)}function mw(e,t,r){ro(e,N.x0Components,`w=${t},wi=${r}`)}function ro(e,t,r){let n=e.multiValueHeaders[t];n?Array.isArray(n)?n[0]=`${r},${n[0]}`:e.multiValueHeaders[t]=`${r},${n}`:e.multiValueHeaders[t]=`${r}`}var Zr,to,_l,xl=j(()=>{"use strict";ae();Zr=Te(dl());cn();El();to=Te(require("stream"));ht();_l=(e,t)=>{let r={body:Buffer.from(""),isBase64Encoded:!0,statusCode:200,statusMessage:"OK",multiValueHeaders:{}},n,i=new to.default.Readable;if(i.url=e.path,i.path=e.path,i.query={},i.method=e.httpMethod,i.rawHeaders=[],i.headers={},e.multiValueQueryStringParameters&&Object.keys(e.multiValueQueryStringParameters).length){Object.keys(e.multiValueQueryStringParameters).forEach(d=>{let y=e.multiValueQueryStringParameters[d];Array.isArray(y)&&y.length===1&&(e.multiValueQueryStringParameters[d]=y[0])});let l=(0,Zr.stringify)(e.multiValueQueryStringParameters,{indices:!1});i.url+=`?${l}`,i.query=(0,Zr.parse)(l)}let o=e.multiValueHeaders||{};for(let l of Object.keys(o)){for(let d of o[l])i.rawHeaders.push(l),i.rawHeaders.push(d);i.headers[l.toLowerCase()]=o[l].toString()}i.getHeader=l=>i.headers[l.toLowerCase()],i.getHeaders=()=>i.headers,i.setHeader=(l,d)=>{i.headers[l.toLowerCase()]=d},i.removeHeader=l=>{delete i.headers[l.toLowerCase()]},i.connection={};let a=i.getHeader(N.acceptEncoding);i.secure=!mt()&&i.getHeader(N.x0Protocol)!=="http",i.socket={encrypted:i.secure},i.connection={encrypted:i.secure},i.protocol=i.secure?"https":"http";let s;i.headers[N.xRequestId]||(s=er(),i.headers[N.xRequestId]=s);let u=new to.default;Object.defineProperty(u,"statusCode",{get(){return r.statusCode},set(l){r.statusCode=l}}),Object.defineProperty(u,"statusMessage",{get(){return r.statusMessage},set(l){r.statusMessage=l}}),u.headers={},u.writeHead=(l,d,y)=>{r.statusCode=l,typeof d=="string"?r.statusMessage=d:typeof d=="object"&&(y=d,d=void 0),typeof y=="object"&&Object.entries(y).forEach(([p,h])=>{u.setHeader(p,h)}),s&&u.setHeader(N.xRequestId,s)},u.write=l=>{r.body=Buffer.concat([r.body,Buffer.isBuffer(l)?l:Buffer.from(l)])},u.setHeader=(l,d)=>{u.headers[l.toLowerCase()]=d},u.removeHeader=l=>{delete u.headers[l.toLowerCase()]},u.getHeader=l=>u.headers[l.toLowerCase()],u.getHeaders=()=>u.headers;let c=l=>d=>{d&&u.write(d),bl(a,u,r),r.body=r.body.toString("base64"),r.multiValueHeaders=u.headers,t.stop(),yw(r),pw(r,t),mw(r,dw(),t.lambda.id),f(),l(r)};n=new Promise(l=>{u.end=c(l)}),e.body&&(i.push(e.body,e.isBase64Encoded?"base64":void 0),i._rawBodyBase64=e.body),i.push(null);function f(){for(let l of Object.keys(r.multiValueHeaders))Array.isArray(r.multiValueHeaders[l])||(r.multiValueHeaders[l]=[r.multiValueHeaders[l]])}return{req:i,res:u,responsePromise:n}}});function Ft(e,t){let r=e,n=t.split(".");for(let i of n){if(typeof r>"u")return;r=r[i]}return r}var no=j(()=>{"use strict"});function io(e,t){return!!Ft(e,t)}var Pl=j(()=>{"use strict";no()});var Al=m((_O,Tl)=>{"use strict";var hw=function(t){return gw(t)&&!vw(t)};function gw(e){return!!e&&typeof e=="object"}function vw(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||bw(e)}var Sw=typeof Symbol=="function"&&Symbol.for,ww=Sw?Symbol.for("react.element"):60103;function bw(e){return e.$$typeof===ww}function Ew(e){return Array.isArray(e)?[]:{}}function kt(e,t){return t.clone!==!1&&t.isMergeableObject(e)?st(Ew(e),e,t):e}function Ow(e,t,r){return e.concat(t).map(function(n){return kt(n,r)})}function _w(e,t){if(!t.customMerge)return st;var r=t.customMerge(e);return typeof r=="function"?r:st}function xw(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function Rl(e){return Object.keys(e).concat(xw(e))}function Il(e,t){try{return t in e}catch{return!1}}function Pw(e,t){return Il(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Rw(e,t,r){var n={};return r.isMergeableObject(e)&&Rl(e).forEach(function(i){n[i]=kt(e[i],r)}),Rl(t).forEach(function(i){Pw(e,i)||(Il(e,i)&&r.isMergeableObject(t[i])?n[i]=_w(i,r)(e[i],t[i],r):n[i]=kt(t[i],r))}),n}function st(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Ow,r.isMergeableObject=r.isMergeableObject||hw,r.cloneUnlessOtherwiseSpecified=kt;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):Rw(e,t,r):kt(t,r)}st.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return st(n,i,r)},{})};var Iw=st;Tl.exports=Iw});var so,uo,ql,Ll,oo,ao,Nl,Dl=j(()=>{"use strict";so=require("os");ae();ht();Ye();uo={$id:"/domainOrIpSchema",type:"string",minLength:1},ql={$id:"/backendObjectSchema",type:"object",properties:{domainOrIp:{$ref:uo.$id},port:{type:"number",minimum:1,maximum:65535},hostHeader:{type:"string",minLength:1},disableCheckCert:{type:"boolean"},firstByteTimeout:{type:"number"},basePath:{type:"string"}},additionalProperties:!1,required:["domainOrIp"]},Ll={$id:"/backendSchema",type:"object",patternProperties:{"^.*$":{oneOf:[{$ref:uo.$id},{$ref:ql.$id}]}}},oo={$id:"/edgioFileConfigurationSchema",type:"object",properties:{name:{type:"string"},team:{type:"string"},prerenderConcurrency:{type:"number"},production:{type:"boolean"},routes:{type:"string"},server:{type:"object",required:["path"],properties:{path:{type:"string"},export:{type:"string"}}},includeFiles:{type:"object"},sources:{type:"array",items:{type:"string"}},backends:{$ref:Ll.$id},includeNodeModules:{type:"boolean"},connector:{type:"string"},disableImageOptimizer:{type:"boolean"}},additionalProperties:!1,required:[]},ao=class{static validateEdgioFileConfiguration(t){if(vr())return t;let r=ue("ajv");if(t.connector)try{let a=require(`${t.connector}/configSchema`);Object.assign(oo.properties,a)}catch{}let n=new r({allErrors:!0,schemas:[oo,Ll,ql,uo]}),i=[],o=n.getSchema(oo.$id);if(t.backends&&t.backends.moov!=null&&i.push({message:"is a reserved backend name",dataPath:".backends['moov']"}),t.backends&&t.backends[pe.static]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${pe.static}`}),t.backends&&t.backends[pe.js]&&i.push({message:"is a reserved backend name",dataPath:`.backends.${pe.js}`}),!o(t)&&o.errors&&(i=[...i,...o.errors]),i.length){let a=i.map((s,u)=>{let c=`${u+1}) config${s.dataPath}: ${s.message}`;return s.keyword==="additionalProperties"&&(c+=` '${s.params.additionalProperty}'`),c}).join(so.EOL);throw new Error(`Edgio configuration validation failed with errors: ${so.EOL}${a}`)}return t}},Nl=ao});var Cl,co,at,fo,Fl,kl=j(()=>{"use strict";no();Pl();Cl=Te(Al()),co=require("fs"),at=require("path");ae();Dl();Ye();fo=class{get(t,r){if(this.has(t))return Ft(this.values,t);if(typeof r<"u")return r;throw new Error(`Edgio configuration key: "${t}" is not defined`)}has(t){return this.values||this.loadEdgioConfig(),io(this.values,t)}get all(){return this.values||this.loadEdgioConfig(),this.values}loadEdgioConfig(){let t=this.loadFromFile(),r=this.loadFromEnv();this.values=this.trimStrings(Cl.default.all([{},this.getDefaults(),t,r]))}trimStrings(t){return Object.entries(t).forEach(([r,n])=>{typeof n=="object"?this.trimStrings(n):typeof n=="string"&&(t[r]=n.trim())}),t}loadFromFile(){let t=[(0,at.join)(process.cwd(),hr),(0,at.join)(process.cwd(),hr.replace(".js",".cjs")),(0,at.join)(process.cwd(),gr),(0,at.join)(process.cwd(),gr.replace(".js",".cjs"))].find(co.existsSync);if(t)try{let r=ue(t);return Nl.validateEdgioFileConfiguration(r)}catch(r){throw new Error(`Failed to load ${t}: ${r.message}`)}return{}}loadFromEnv(){if(process.env[ye.config])try{return JSON.parse(process.env[ye.config])}catch{throw new Error(`Edgio configuration variable: ${ye.config}, is not parsable as json`)}return{}}getDefaults(){return{production:!0,backends:{},includeNodeModules:!1,routes:["routes.js","routes.ts","routes.cjs"].find(t=>(0,co.existsSync)((0,at.join)(process.cwd(),t)))??"routes.js"}}},Fl=new fo});var Ml={};Ie(Ml,{handler:()=>Tw});async function Tw(e,t){let r=new ft(t);r.start();let n=Kn(t);switch(e.action){case"getEdgeConfig":return jt.createEdgeConfig();case"getPreloadConfig":return yo(()=>jt.createPreloadConfig())}let i,o,a;try{let s=_l(e,r);i=s.req,o=s.res,a=s.responsePromise}catch(s){return yo(()=>(console.log("Failed to parse the event to get request and response data:",s.message,s.stack),{body:Buffer.from('{"error":"Failed to parse the event to get request and response data"}'),isBase64Encoded:!0,statusCode:530,statusMessage:"Internal Edgio Error",multiValueHeaders:{}}))}return await yo(async()=>{let s=i.headers||{};n.logDownstreamRequestInfo({method:i.method,path:i.url,host:s.host,headers:s,protocol:`${s["x-0-protocol"]||"https"}:`,...gt(i._rawBodyBase64,i.headers)});try{await qw(3001)}catch(u){throw console.error(u),u}return nf(()=>jt.run(i,o))(),a.then(u=>{let c=o.headers||{};return n.logDownstreamResponseInfo({statusCode:o.statusCode,statusMessage:o.statusMessage,headers:c,...gt(u.body,o.headers)}),u})},i,t)}async function Aw(e){let t=(0,en.join)(process.cwd(),Yc(pe.js));if((0,jl.existsSync)(t)){let r=ue(t);r.default&&(r=r.default);let n=process.cwd();await r(e),process.chdir(n),jt.setBackend(pe.js,{domainOrIp:Vn,port:e});let i=process.env.EDGIO_IMAGE_OPTIMIZER_PORT;i&&!/^\d+$/.test(i)&&(console.error("Error: EDGIO_IMAGE_OPTIMIZER_PORT is not valid number"),process.exit(1)),jt.setBackend(pe.imageOptimizer,{domainOrIp:process.env.EDGIO_IMAGE_OPTIMIZER_HOST,port:i?parseInt(i):void 0})}}async function qw(e){return lo||(lo=Aw(e)),lo}function Lw(e,t){(process.env.EDGIO_LOCAL!=="true"||process.env.EDGIO_LOCAL_CONSOLE_WRAP==="true")&&br.enable({clientIp:e&&e.headers[N.x0ClientIp],requestId:e&&e.headers[N.xRequestId],wi:t==null?void 0:t.id})}function Nw(){br.disable()}async function yo(e,t,r){try{return Lw(t,r),await e()}finally{Nw()}}var jl,en,jt,lo,$l=j(()=>{"use strict";ae();jl=Te(Kc()),en=require("path");Qc();of();sf();Ye();xl();Yn();Xn();fn();kl();jt=Ii("./"+(0,en.basename)(Fl.get("routes")))});var kw={};Ie(kw,{handler:()=>Fw});module.exports=Ae(kw);var{default:Dw}=(fn(),Ae(No)),Bl=new Dw,{interceptRequests:Cw}=Ca();async function Fw(e){return Cw(e,{enableHttpRequestLogging:process.env.EDGIO_HTTP_REQUEST_LOGGING==="1",lambdaInstance:Bl}),(async()=>{let{handler:t}=($l(),Ae(Ml));return await t(e,Bl)})()}0&&(module.exports={handler});
/*!
 * content-type
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */
//# sourceMappingURL=handler.js.map
